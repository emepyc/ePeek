!function t(e,n,r){function o(i,s){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=n[i]={exports:{}};e[i][0].call(u.exports,function(t){var n=e[i][1][t];return o(n?n:t)},u,u.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(t,e,n){e.exports=t("./index.js")},{"./index.js":2}],2:[function(t,e,n){"undefined"==typeof tnt&&(e.exports=tnt=t("./src/ta.js"));var r=t("biojs-events");r.mixin(tnt),tnt.utils=t("tnt.utils"),tnt.ensembl=t("tnt.ensembl"),tnt.tree=t("tnt.tree"),tnt.tree.node=t("tnt.tree.node"),tnt.tree.parse_newick=t("tnt.newick").parse_newick,tnt.tree.parse_nhx=t("tnt.newick").parse_nhx,tnt.board=t("tnt.board")},{"./src/ta.js":65,"biojs-events":3,"tnt.board":9,"tnt.ensembl":21,"tnt.newick":37,"tnt.tree":45,"tnt.tree.node":39,"tnt.utils":61}],3:[function(t,e,n){var r=t("backbone-events-standalone");r.onAll=function(t,e){return this.on("all",t,e),this},r.oldMixin=r.mixin,r.mixin=function(t){r.oldMixin(t);for(var e=["onAll"],n=0;n<e.length;n++){var o=e[n];t[o]=this[o]}return t},e.exports=r},{"backbone-events-standalone":5}],4:[function(t,e,n){!function(){function t(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++c+"";return t?t+e:e},has:function(t,e){return i.call(t,e)},each:function(t,e,n){if(null!=t)if(a&&t.forEach===a)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,o=t.length;o>r;r++)e.call(n,t[r],r,t);else for(var i in t)this.has(t,i)&&e.call(n,t[i],i,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var r,o=this,a=Array.prototype.forEach,i=Object.prototype.hasOwnProperty,s=Array.prototype.slice,c=0,u=t();r={on:function(t,e,n){if(!d(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!d(this,"once",t,[e,n])||!e)return this;var r=this,o=u.once(function(){r.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var r,o,a,i,s,c,l,f;if(!this._events||!d(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(i=t?[t]:u.keys(this._events),s=0,c=i.length;c>s;s++)if(t=i[s],a=this._events[t]){if(this._events[t]=r=[],e||n)for(l=0,f=a.length;f>l;l++)o=a[l],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&r.push(o);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!d(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&f(n,e),r&&f(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var o=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var a in r)r[a].off(e,n,this),o&&delete this._listeners[a];return this}};var l=/\s+/,d=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(r));return!1}if(l.test(n)){for(var a=n.split(l),i=0,s=a.length;s>i;i++)t[e].apply(t,[a[i]].concat(r));return!1}return!0},f=function(t,e){var n,r=-1,o=t.length,a=e[0],i=e[1],s=e[2];switch(e.length){case 0:for(;++r<o;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=t[r]).callback.call(n.ctx,a);return;case 2:for(;++r<o;)(n=t[r]).callback.call(n.ctx,a,i);return;case 3:for(;++r<o;)(n=t[r]).callback.call(n.ctx,a,i,s);return;default:for(;++r<o;)(n=t[r]).callback.apply(n.ctx,e)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(t,e){r[e]=function(e,n,r){var o=this._listeners||(this._listeners={}),a=e._listenerId||(e._listenerId=u.uniqueId("l"));return o[a]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),r.bind=r.on,r.unbind=r.off,r.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=r),n.BackboneEvents=r):"function"==typeof define&&"object"==typeof define.amd?define(function(){return r}):o.BackboneEvents=r}(this)},{}],5:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":4}],6:[function(t,e,n){function r(){}var o=e.exports={};o.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],7:[function(t,e,n){e.exports=t("./src/api.js")},{"./src/api.js":8}],8:[function(t,e,n){var r=function(t){var e=function(){var t=[];return t.add_batch=function(e){t.unshift(e)},t.update=function(e,n){for(var r=0;r<t.length;r++)for(var o in t[r])if(o===e)return t[r][o]=n,!0;return!1},t.add=function(e,n){if(t.update(e,n));else{var r={};r[e]=n,t.add_batch(r)}},t.get=function(e){for(var n=0;n<t.length;n++)for(var r in t[n])if(r===e)return t[n][r]},t},n=e(),r=function(){};r.check=function(e,n,o){if(!(e instanceof Array))return"function"==typeof e?e.check(n,o):t[e].check(n,o),r;for(var a=0;a<e.length;a++)r.check(e[a],n,o)},r.transform=function(e,n){if(!(e instanceof Array))return"function"==typeof e?e.transform(n):t[e].transform(n),r;for(var o=0;o<e.length;o++)r.transform(e[o],n)};var o=function(e,r){var o=[],a=[],i=r.on_getter||function(){return n.get(e)},s=r.on_setter||function(t){for(var r=0;r<a.length;r++)t=a[r](t);for(var i=0;i<o.length;i++)if(!o[i].check(t)){var s=o[i].msg||"Value "+t+" doesn't seem to be valid for this method";throw s}n.add(e,t)},c=function(e){return arguments.length?(s(e),t):i()};c.check=function(t,e){return arguments.length?(o.push({check:t,msg:e}),this):o},c.transform=function(t){return arguments.length?(a.push(t),this):a},t[e]=c},a=function(t,e){if("object"==typeof t){n.add_batch(t);for(var r in t)o(r,e)}else n.add(t,e.default_value),o(t,e)};return r.getset=function(t,e){return a(t,{default_value:e}),r},r.get=function(t,e){var n=function(){throw"Method defined only as a getter (you are trying to use it as a setter"};return a(t,{default_value:e,on_setter:n}),r},r.set=function(t,e){var n=function(){throw"Method defined only as a setter (you are trying to use it as a getter"};return a(t,{default_value:e,on_getter:n}),r},r.method=function(e,n){if("object"==typeof e)for(var o in e)t[o]=e[o];else t[e]=n;return r},r};e.exports=n=r},{}],9:[function(t,e,n){e.exports=t("./src/index")},{"./src/index":17}],10:[function(t,e,n){e.exports=t("./src/index.js")},{"./src/index.js":11}],11:[function(t,e,n){var r=t("./utils.js");r.reduce=t("./reduce.js"),e.exports=n=r},{"./reduce.js":12,"./utils.js":13}],12:[function(t,e,n){var r=function(){var t=5,e="val",n=function(t,e){return e>t?.2*e>=e-t:.2*t>=t-e},r=function(t){return t},o=function(t){if(!t.length)return t;var e=s(t),n=r(e);return n},a=function(t,n){if(n.sort(function(t,n){return t[e]-n[e]}),n.length%2)t[e]=n[~~(n.length/2)][e];else{var r=~~(n.length/2)-1;t[e]=(n[r][e]+n[r+1][e])/2}return t},i=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},s=function(e){if(0===t)return e;for(var n=[],r=0;r<e.length;r++){var o=t>r?0:r-t,s=r>e.length-t?e.length:r+t;n[r]=a(i(e[r]),e.slice(o,s+1))}return n};return o.reducer=function(t){return arguments.length?(r=t,o):r},o.redundant=function(t){return arguments.length?(n=t,o):n},o.value=function(t){return arguments.length?(e=t,o):e},o.smooth=function(e){return arguments.length?(t=e,o):t},o},o=function(){var t=r().value("start"),e="end",n=function(n,r){return{object:{start:n.object[t.value()],end:r[e]},value:r[e]}};return t.reducer(function(r){for(var o=t.value(),a=t.redundant(),i=[],s={object:r[0],value:r[0][e]},c=1;c<r.length;c++)a(r[c][o],s.value)?s=n(s,r[c]):(i.push(s.object),s.object=r[c],s.value=r[c].end);return i.push(s.object),i}),r.join=function(e){return arguments.length?(n=e,t):n},r.value2=function(n){return arguments.length?(e=n,t):e},t},a=function(){var t=r();return t.reducer(function(e){for(var n=t.redundant(),r=t.value(),o=[],a=e[0],i=1;i<e.length-1;i++)n(e[i][r],a[r])||(o.push(a),a=e[i]);return o.push(a),o.push(e[e.length-1]),o}),t};e.exports=r,e.exports.line=a,e.exports.block=o},{}],13:[function(t,e,n){e.exports={iterator:function(t){var e=t||0,n=function(){return e++};return n},script_path:function(t){var e=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),n=new RegExp(e+"$"),r=new RegExp("(.*)"+e+"$"),o=document.getElementsByTagName("script"),a="";if(void 0!==o)for(var i in o)if(o[i].src&&o[i].src.match(n))return o[i].src.replace(r,"$1");return a},defer_cancel:function(t,e){var n,r=function(){var r=Array.prototype.slice.call(arguments),o=this;clearTimeout(n),n=setTimeout(function(){t.apply(o,r)},e)};return r}}},{}],14:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.utils").defer_cancel,a=function(){"use strict";function t(t){t.parentNode.appendChild(t)}var e,n,a,i,s,c=[],u=50,l=0,d=920,f=20,h={species:void 0,chr:void 0,from:0,to:500},p={left:void 0,right:void 0},v=3,g=d3.rgb("#F8FBEF"),_=d3.behavior.zoom(),m={min:0,max:1e3,zoom_out:1e3,zoom_in:100},y=500,b=!0,x={ease:d3.ease("cubic-in-out"),extend_canvas:{left:0,right:0},show_frame:!0},w=function(t){n=d3.select(t).attr("id"),d3.select(t).classed("tnt",!0);var r=d3.select(t).append("div").attr("id","tnt_"+n).style("position","relative").classed("tnt_framed",x.show_frame?!0:!1).style("width",d+2*v+x.extend_canvas.right+x.extend_canvas.left+"px"),o=r.append("div").attr("class","tnt_groupDiv");e=o.append("svg").attr("class","tnt_svg").attr("width",d).attr("height",l).attr("pointer-events","all"),i=e.append("g").attr("transform","translate(0,20)").append("g").attr("class","tnt_g"),p.left=i.append("rect").attr("id","tnt_"+n+"_5pcap").attr("x",0).attr("y",0).attr("width",0).attr("height",l).attr("fill","red"),p.right=i.append("rect").attr("id","tnt_"+n+"_3pcap").attr("x",d-v).attr("y",0).attr("width",0).attr("height",l).attr("fill","red"),a=i.append("rect").attr("class","tnt_pane").attr("id","tnt_"+n+"_pane").attr("width",d).attr("height",l).style("fill",g)},k=r(w).getset(x).getset(m).getset(h);k.transform(w.extend_canvas,function(t){var e=w.extend_canvas();return t.left=t.left||e.left,t.right=t.right||e.right,t}),k.method("start",function(){m.max-m.min<m.zoom_out&&(m.zoom_out=m.max-m.min),A();for(var t=0;t<c.length;t++)c[t].g&&c[t].g.remove(),z(c[t]);E();var e=function(){h.to-h.from<m.zoom_in&&(h.from+m.zoom_in>m.max?h.to=m.max:h.to=h.from+m.zoom_in);for(var t=0;t<c.length;t++)j(c[t],h)};e()}),k.method("update",function(){for(var t=0;t<c.length;t++)j(c[t])});var j=function(t,e){if(t.data()){var n=t.data(),r=n;r.call(t,{loc:e,on_success:function(){t.display().update.call(t,e)}})}},A=function(){s=d3.scale.linear().domain([h.from,h.to]).range([0,d]),b&&i.call(_.x(s).scaleExtent([(h.to-h.from)/(m.zoom_out-1),(h.to-h.from)/m.zoom_in]).on("zoom",O))},T=function(t){for(var e=[],n=0;n<t.length;n++){for(var r=!1,o=0;o<c.length;o++)if(c[o].id()===t[n].id()){r=!0,e[o]=!0;break}r||(z(t[n]),j(t[n],{from:h.from,to:h.to}))}for(var a=0;a<c.length;a++)e[a]||c[a].g.remove();c=t,E()};k.method("scroll",function(t){var e=Math.abs(t);t>0?q(e,1):0>t&&q(e,-1)}),k.method("zoom",function(t){q(1/t,0)}),k.method("find_track",function(t){for(var e=0;e<c.length;e++)if(c[e].id()===t)return c[e]}),k.method("remove_track",function(t){t.g.remove()}),k.method("add_track",function(t){if(t instanceof Array){for(var e=0;e<t.length;e++)w.add_track(t[e]);return w}return c.push(t),w}),k.method("tracks",function(t){return arguments.length?(T(t),this):c}),k.method("width",function(t){if(!arguments.length)return d;if(u>t&&(t=u),void 0!==n){d3.select("#tnt_"+n).select("svg").attr("width",t),d3.select("#tnt_"+n).style("width",parseInt(t)+2*v+"px"),d3.select("#tnt_"+n+"_pane").attr("width",t),p.right.attr("x",t-v),d=t,s.range([0,d]),A();for(var e=0;e<c.length;e++)c[e].g.select("rect").attr("width",t),c[e].display().scale(s),c[e].display().reset.call(c[e]),c[e].display().init.call(c[e],t),c[e].display().update.call(c[e],h)}else d=t;return w}),k.method("allow_drag",function(t){return arguments.length?(b=t,b?void 0!==s&&i.call(_.x(s).scaleExtent([(h.to-h.from)/(m.zoom_out-1),(h.to-h.from)/m.zoom_in]).on("zoom",O)):_.x(d3.scale.linear()).on("zoom",null),w):b});var E=function(){for(var r=0,o=0;o<c.length;o++){var i=c[o];i.g.attr("transform")?i.g.transition().duration(y).attr("transform","translate("+x.extend_canvas.left+","+r+")"):i.g.attr("transform","translate("+x.extend_canvas.left+","+r+")"),r+=i.height()}return e.attr("height",r+f),d3.select("#tnt_"+n).style("height",r+10+f+"px"),d3.select("#tnt_"+n+"_5pcap").attr("height",r).each(function(e){t(this)}),d3.select("#tnt_"+n+"_3pcap").attr("height",r).each(function(e){t(this)}),a.attr("height",r+f),w},z=function(t){return t.g=e.select("g").select("g").append("g").attr("class","tnt_track").attr("height",t.height()),t.g.append("rect").attr("x",0).attr("y",0).attr("width",w.width()).attr("height",t.height()).style("fill",t.color()).style("pointer-events","none"),t.display()&&t.display().scale(s).init.call(t,d),w},q=function(t,e){var n,r=s.domain(),o=r[1]-r[0],a=o*t-o;switch(e){case 1:n=[~~r[0]-a,~~(r[1]-a)];break;case-1:n=[~~r[0]+a,~~(r[1]-a)];break;case 0:n=[r[0]-~~(a/2),r[1]+~~a/2]}var i=d3.interpolateNumber(r[0],n[0]),c=x.ease,u=0;d3.timer(function(){var t,n=i(c(u));switch(e){case-1:t=n+o;break;case 1:t=n+o;break;case 0:t=r[1]+r[0]-n}var a=[n,t];return s.domain(a),O(s),u+=.02,u>1})},R=function(){var t=s.domain();w.from(~~t[0]),w.to(~~t[1]);for(var e=0;e<c.length;e++){var n=c[e];j(n,h)}},M=o(R,300),O=function(t){void 0!==t&&b&&_.x(t);var e=s.domain();e[0]<=m.min+5&&d3.select("#tnt_"+n+"_5pcap").attr("width",v).transition().duration(200).attr("width",0),e[1]>=m.max-5&&d3.select("#tnt_"+n+"_3pcap").attr("width",v).transition().duration(200).attr("width",0),e[0]<m.min?_.translate([_.translate()[0]-s(m.min)+s.range()[0],_.translate()[1]]):e[1]>m.max&&_.translate([_.translate()[0]-s(m.max)+s.range()[1],_.translate()[1]]),M();for(var r=0;r<c.length;r++){var o=c[r];o.display().move.call(o)}};return w};e.exports=n=a},{"tnt.api":7,"tnt.utils":10}],15:[function(t,e,n){var r=t("tnt.api"),o=t("./spinner.js")();tnt_data={},tnt_data.sync=function(){var t=function(e){var n=this;n.data().elements(t.retriever().call(n,e.loc)),e.on_success()};return r(t).getset("elements",[]).getset("retriever",function(){}),t},tnt_data.async=function(){var t=function(e){var n=this;o.on.call(n),t.retriever().call(n,e.loc).then(function(t){n.data().elements(t),e.on_success(),o.off.call(n)})};r(t).getset("elements",[]).getset("retriever");return t},tnt_data.empty=function(){var t=tnt_data.sync();return t},e.exports=n=tnt_data},{"./spinner.js":19,"tnt.api":7}],16:[function(t,e,n){var r=t("tnt.api"),o=t("./layout.js"),a=function(){var t=d3.dispatch("click","dblclick","mouseover","mouseout"),e={create:function(){throw"create_elem is not defined in the base feature object"},mover:function(){throw"move_elem is not defined in the base feature object"},updater:function(){},guider:function(){},index:void 0,layout:o.identity(),color:"#000",scale:void 0},n={},a=function(){var t=this;t.g.selectAll(".tnt_elem").remove(),t.g.selectAll(".tnt_guider").remove()},i=function(t){var n=this;n.g.append("text").attr("x",5).attr("y",12).attr("font-size",11).attr("fill","grey").text(n.label()),e.guider.call(n,t)},s=function(n,r,o){n.on("click",t.click),n.on("mouseover",t.mouseover),n.on("dblclick",t.dblclick),n.on("mouseout",t.mouseout),e.create.call(r,n,o)},c=function(t,r){var o=this,a=o.g,i=o.data().elements();void 0!==r&&(i=i[r]);var s=e.layout.call(o,i);if(void 0!==s){var c,u;c=void 0!==r?a.selectAll(".tnt_elem_"+r):a.selectAll(".tnt_elem"),u=e.index?c.data(s,function(t){return void 0!==t?e.index(t):void 0}):c.data(s),e.updater.call(o,u,e.scale);var l=u.enter();l.append("g").attr("class","tnt_elem").classed("tnt_elem_"+r,r).call(n.plot,o,e.scale),u.exit().remove()}},u=function(t){var n,r=this,o=r.g;n=void 0!==t?o.selectAll(".tnt_elem_"+t):o.selectAll(".tnt_elem"),e.mover.call(this,n)},l=function(t){t.parentNode.appendChild(t)},d=function(t){if(void 0!==t){var e=this,n=e.g;n.selectAll(".tnt_elem_"+t).each(function(){l(this)})}};return r(n).getset(e).method({reset:a,plot:s,update:c,move:u,init:i,move_to_front:d}),d3.rebind(n,t,"on")};a.composite=function(){var t={},e=[],n={},o=function(){for(var e=this,n=0;n<t.length;n++)t[n].reset.call(e)},a=function(e){var r=this;for(var o in t)t.hasOwnProperty(o)&&(t[o].scale(n.scale()),t[o].init.call(r,e))},i=function(){for(var n=this,r=0;r<e.length;r++)t[e[r]].update.call(n,void 0,e[r]),t[e[r]].move_to_front.call(n,e[r])},s=function(){var e=this;for(var n in t)t.hasOwnProperty(n)&&t[n].move.call(e,n)},c=function(r,o){return t[r]=o,e.push(r),n},u=function(){for(var n=[],r=0;r<e.length;r++)n.push(t[e[r]]);return n};return r(n).getset("scale").method({reset:o,update:i,move:s,init:a,add:c,displays:u}),n},a.area=function(){var t,e=a.line(),n=e.line(),r=d3.svg.area().interpolate(n.interpolate()).tension(e.tension()),o=e.create();e.create(function(a){var i=this,s=e.scale();void 0!==t&&i.g.select("path").remove(),o.call(i,a,s),r.x(n.x()).y1(n.y()).y0(i.height()),t=a.data(),a.remove(),i.g.append("path").attr("class","tnt_area").classed("tnt_elem",!0).datum(t).attr("d",r).attr("fill",d3.rgb(e.color()).brighter())});var i=e.mover();return e.mover(function(o){var a=this,s=e.scale();i.call(a,o,s),r.x(n.x()),a.g.select(".tnt_area").datum(t).attr("d",r)}),e},a.line=function(){var t=a(),e=function(t){return t.pos},n=function(t){return t.val},r=.7,o=d3.scale.linear(),i=d3.svg.line().interpolate("basis");t.line=function(){return i},t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(e){return arguments.length?(n=e,t):n},t.tension=function(e){return arguments.length?(r=e,t):r};var s;return t.create(function(a){var c=this,u=t.scale();void 0!==s&&c.g.select("path").remove(),i.tension(r).x(function(t){return u(e(t))}).y(function(t){return c.height()-o(n(t))}),s=a.data(),a.remove(),o.domain([0,1]).range([0,c.height()-2]),c.g.append("path").attr("class","tnt_elem").attr("d",i(s)).style("stroke",t.color()).style("stroke-width",4).style("fill","none")}),t.mover(function(n){var r=this,o=t.scale();i.x(function(t){return o(e(t))}),r.g.select("path").attr("d",i(s))}),t},a.conservation=function(){var t=a.area(),e=t.create();return t.create(function(n){var r=this,o=t.scale();e.call(r,d3.select(n[0][0]),o)}),t},a.ensembl=function(){var t=a(),e="#7FFF00",n="#00BB00";return t.guider(function(e){var n=this,r=~~(n.height()-.8*n.height())/2;n.g.append("line").attr("class","tnt_guider").attr("x1",0).attr("x2",e).attr("y1",r).attr("y2",r).style("stroke",t.color()).style("stroke-width",1),n.g.append("line").attr("class","tnt_guider").attr("x1",0).attr("x2",e).attr("y1",n.height()-r).attr("y2",n.height()-r).style("stroke",t.color()).style("stroke-width",1)}),t.create(function(e){var n=this,r=t.scale(),o=~~(n.height()-.8*n.height())/2;e.append("rect").attr("x",function(t){return r(t.start)}).attr("y",o).attr("width",function(t){return r(t.end)-r(t.start)}).attr("height",n.height()-~~(2*o)).attr("fill",n.color()).transition().duration(500).attr("fill",function(e){return"high"===e.type?d3.rgb(t.color()):"low"===e.type?d3.rgb(t.color2()):d3.rgb(t.color3())})}),t.updater(function(e){var n=t.scale();e.select("rect").attr("width",function(t){return n(t.end)-n(t.start)})}),t.mover(function(e){var n=t.scale();e.select("rect").attr("x",function(t){return n(t.start)}).attr("width",function(t){return n(t.end)-n(t.start)})}),t.color2=function(n){return arguments.length?(e=n,t):e},t.color3=function(e){return arguments.length?(n=e,t):n},t},a.vline=function(){var t=a();return t.create(function(e){var n=t.scale(),r=this;e.append("line").attr("x1",function(e){return n(t.index()(e))}).attr("x2",function(e){return n(t.index()(e))}).attr("y1",0).attr("y2",r.height()).attr("stroke",t.color()).attr("stroke-width",1)}),t.mover(function(e){var n=t.scale();e.select("line").attr("x1",function(e){return n(t.index()(e))}).attr("x2",function(e){return n(t.index()(e))})}),t},a.pin=function(){var t=a(),e=d3.scale.linear().domain([0,0]).range([0,0]),n={pos:d3.functor("pos"),val:d3.functor("val"),domain:[0,0]},o=5;return r(t).getset(n),t.create(function(r){var a=this,i=t.scale();e.domain(t.domain()).range([o,a.height()-o-10]),r.append("line").attr("x1",function(t,e){return i(t[n.pos(t,e)])}).attr("y1",function(t){return a.height()}).attr("x2",function(t,e){return i(t[n.pos(t,e)])}).attr("y2",function(t,r){return a.height()-e(t[n.val(t,r)])}).attr("stroke",function(e){return d3.functor(t.color())(e)}),r.append("circle").attr("cx",function(t,e){return i(t[n.pos(t,e)])}).attr("cy",function(t,r){return a.height()-e(t[n.val(t,r)])}).attr("r",o).attr("fill",function(e){return d3.functor(t.color())(e)}),r.append("text").attr("font-size","13").attr("x",function(t,e){return i(t[n.pos(t,e)])}).attr("y",function(t,e){return 10}).style("text-anchor","middle").text(function(t){return t.label||""})}),t.updater(function(t){t.select("text").text(function(t){return t.label||""})}),t.mover(function(r){var o=this,a=t.scale();r.select("line").attr("x1",function(t,e){return a(t[n.pos(t,e)])}).attr("y1",function(t){return o.height()}).attr("x2",function(t,e){return a(t[n.pos(t,e)])}).attr("y2",function(t,r){return o.height()-e(t[n.val(t,r)])}),r.select("circle").attr("cx",function(t,e){return a(t[n.pos(t,e)])}).attr("cy",function(t,r){return o.height()-e(t[n.val(t,r)])}),r.select("text").attr("x",function(t,e){return a(t[n.pos(t,e)])}).text(function(t){return t.label||""})}),t.guider(function(t){var e=this;e.g.append("line").attr("x1",0).attr("x2",t).attr("y1",e.height()).attr("y2",e.height()).style("stroke","black").style("stroke-with","1px")}),t},a.block=function(){var t=a();return r(t).getset("from",function(t){return t.start}).getset("to",function(t){return t.end}),t.create(function(e){var n=this,r=t.scale();e.append("rect").attr("x",function(e,n){return r(t.from()(e,n))}).attr("y",0).attr("width",function(e,n){return r(t.to()(e,n))-r(t.from()(e,n))}).attr("height",n.height()).attr("fill",n.color()).transition().duration(500).attr("fill",function(e){return void 0===e.color?t.color():e.color})}),t.updater(function(e){var n=t.scale();e.select("rect").attr("width",function(t){return n(t.end)-n(t.start)})}),t.mover(function(e){var n=t.scale();e.select("rect").attr("x",function(t){return n(t.start)}).attr("width",function(t){return n(t.end)-n(t.start)})}),t},a.axis=function(){var t,e,n="top",r={};return r.reset=function(){t=void 0;var e=this;e.g.selectAll("rect").remove(),e.g.selectAll(".tick").remove()},r.plot=function(){},r.move=function(){var e=this,n=e.g;n.call(t)},r.init=function(){t=void 0},r.update=function(){void 0===t&&(t=d3.svg.axis().scale(e).orient(n));var r=this,o=r.g;o.call(t)},r.orientation=function(t){return arguments.length?(n=t,this):n},r.scale=function(t){return arguments.length?(e=t,this):e},r},a.location=function(){var t,e,n={};return n.reset=function(){t=void 0},n.plot=function(){},n.init=function(){t=void 0},n.move=function(){var n=e.domain();t.select("text").text("Location: "+~~n[0]+"-"+~~n[1])},n.scale=function(t){return arguments.length?(e=t,this):e},n.update=function(n){var r=this,o=r.g,a=e.domain();void 0===t&&(t=o,t.append("text").text("Location: "+Math.round(a[0])+"-"+Math.round(a[1])))},n},e.exports=n=a},{"./layout.js":18,"tnt.api":7}],17:[function(t,e,n){var r=t("./board.js");r.track=t("./track"),r.track.data=t("./data.js"),r.track.layout=t("./layout.js"),r.track.feature=t("./feature.js"),r.track.layout=t("./layout.js"),e.exports=n=r},{"./board.js":14,"./data.js":15,"./feature.js":16,"./layout.js":18,"./track":20}],18:[function(t,e,n){var r=t("tnt.api"),o=function(){var t=function(e){var n=this;return t.elements().call(n,e),e};r(t).getset("elements",function(){});return t};o.identity=function(){return o().elements(function(t){return t})},e.exports=n=o},{"tnt.api":7}],19:[function(t,e,n){var r=function(){function t(t,e,n){t.append("rect").attr("x","46.5").attr("y","40").attr("width","7").attr("height","20").attr("rx","5").attr("ry","5").attr("fill",d3.rgb(n).darker(2)).attr("transform","rotate("+30*e+" 50 50) translate(0 -30)").append("animate").attr("attributeName","opacity").attr("from","1").attr("to","0").attr("dur","1s").attr("begin",1/12*e+"s").attr("repeatCount","indefinite")}var e,n={};return n.on=function(){var n=this;if(n.spinner?n.spinner++:n.spinner=1,1==n.spinner){var r=n.g,o=n.color();e=r.append("svg").attr("class","tnt_spinner").attr("width","30px").attr("height","30px").attr("xmls","http://www.w3.org/2000/svg").attr("viewBox","0 0 100 100").attr("preserveAspectRatio","xMidYMid"),e.append("rect").attr("x","0").attr("y","0").attr("width","100").attr("height","100").attr("rx","50").attr("ry","50").attr("fill",o);for(var a=0;12>a;a++)t(e,a,o)}else if(n.spinner>0){var i=e.node();i.parentNode&&i.parentNode.appendChild(i)}},n.off=function(){var t=this;if(t.spinner--,!t.spinner){var e=t.g;e.selectAll(".tnt_spinner").remove()}},n};e.exports=n=r},{}],20:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.utils").iterator,a=function(){"use strict";var t,e={color:d3.rgb("#CCCCCC"),height:250,data:a.data.empty(),label:"",id:a.id()},n={};r(n).getset(e);return n.display=function(n){if(!arguments.length)return t;if(t=n,"function"==typeof t)t.layout&&t.layout().height(e.height);else for(var r in t)t.hasOwnProperty(r)&&t[r].layout&&t[r].layout().height(e.height);return this},n};a.id=o(1),e.exports=n=a},{"tnt.api":7,"tnt.utils":10}],21:[function(t,e,n){e.exports=tnt_ensembl=t("./src/rest.js")},{"./src/rest.js":36}],22:[function(t,e,n){(function(n,r){(function(){"use strict";function o(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){D=t}function c(t){K=t}function u(){var t=n.nextTick,e=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(e)&&"0"===e[1]&&"10"===e[2]&&(t=setImmediate),function(){t(p)}}function l(){return function(){X(p)}}function d(){var t=0,e=new Q(p),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function f(){var t=new MessageChannel;return t.port1.onmessage=p,function(){t.port2.postMessage(0)}}function h(){return function(){setTimeout(p,1)}}function p(){for(var t=0;J>t;t+=2){var e=et[t],n=et[t+1];e(n),et[t]=void 0,et[t+1]=void 0}J=0}function v(){try{var e=t,n=e("vertx");return X=n.runOnLoop||n.runOnContext,l()}catch(r){return h()}}function g(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function y(t){try{return t.then}catch(e){return at.error=e,at}}function b(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function x(t,e,n){K(function(t){var r=!1,o=b(n,e,function(n){r||(r=!0,e!==n?j(t,n):T(t,n))},function(e){r||(r=!0,E(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,E(t,o))},t)}function w(t,e){e._state===rt?T(t,e._result):e._state===ot?E(t,e._result):z(e,void 0,function(e){j(t,e)},function(e){E(t,e)})}function k(t,e){if(e.constructor===t.constructor)w(t,e);else{var n=y(e);n===at?E(t,at.error):void 0===n?T(t,e):a(n)?x(t,e,n):T(t,e)}}function j(t,e){t===e?E(t,_()):o(e)?k(t,e):T(t,e)}function A(t){t._onerror&&t._onerror(t._result),q(t)}function T(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&K(q,t))}function E(t,e){t._state===nt&&(t._state=ot,t._result=e,K(A,t))}function z(t,e,n,r){var o=t._subscribers,a=o.length;t._onerror=null,o[a]=e,o[a+rt]=n,o[a+ot]=r,0===a&&t._state&&K(q,t)}function q(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,a=t._result,i=0;i<e.length;i+=3)r=e[i],o=e[i+n],r?O(n,r,o,a):o(a);t._subscribers.length=0}}function R(){this.error=null}function M(t,e){try{return t(e)}catch(n){return it.error=n,it}}function O(t,e,n,r){var o,i,s,c,u=a(n);if(u){if(o=M(n,r),o===it?(c=!0,i=o.error,o=null):s=!0,e===o)return void E(e,m())}else o=r,s=!0;e._state!==nt||(u&&s?j(e,o):c?E(e,i):t===rt?T(e,o):t===ot&&E(e,o))}function P(t,e){try{e(function(e){j(t,e)},function(e){E(t,e)})}catch(n){E(t,n)}}function C(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(g),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?T(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&T(n.promise,n._result))):E(n.promise,n._validationError())}function I(t){return new st(this,t).promise}function N(t){function e(t){j(o,t)}function n(t){E(o,t)}var r=this,o=new r(g);if(!G(t))return E(o,new TypeError("You must pass an array to race.")),o;for(var a=t.length,i=0;o._state===nt&&a>i;i++)z(r.resolve(t[i]),void 0,e,n);return o}function U(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(g);return j(n,t),n}function L(t){var e=this,n=new e(g);return E(n,t),n}function S(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(t){this._id=ft++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==t&&(a(t)||S(),this instanceof F||B(),P(this,t))}function H(){var t;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=ht)}var $;$=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var X,D,Y,G=$,J=0,K=({}.toString,function(t,e){et[J]=t,et[J+1]=e,J+=2,2===J&&(D?D(p):Y())}),V="undefined"!=typeof window?window:void 0,W=V||{},Q=W.MutationObserver||W.WebKitMutationObserver,Z="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),tt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,et=new Array(1e3);Y=Z?u():Q?d():tt?f():void 0===V&&"function"==typeof t?v():h();var nt=void 0,rt=1,ot=2,at=new R,it=new R;C.prototype._validateInput=function(t){return G(t)},C.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},C.prototype._init=function(){this._result=new Array(this.length)};var st=C;C.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,o=0;n._state===nt&&e>o;o++)t._eachEntry(r[o],o)},C.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;i(t)?t.constructor===r&&t._state!==nt?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},C.prototype._settledAt=function(t,e,n){var r=this,o=r.promise;o._state===nt&&(r._remaining--,t===ot?E(o,n):r._result[e]=n),0===r._remaining&&T(o,r._result)},C.prototype._willSettleAt=function(t,e){var n=this;z(t,void 0,function(t){
n._settledAt(rt,e,t)},function(t){n._settledAt(ot,e,t)})};var ct=I,ut=N,lt=U,dt=L,ft=0,ht=F;F.all=ct,F.race=ut,F.resolve=lt,F.reject=dt,F._setScheduler=s,F._setAsap=c,F._asap=K,F.prototype={constructor:F,then:function(t,e){var n=this,r=n._state;if(r===rt&&!t||r===ot&&!e)return this;var o=new this.constructor(g),a=n._result;if(r){var i=arguments[r-1];K(function(){O(r,o,i,a)})}else z(n,o,t,e);return o},"catch":function(t){return this.then(null,t)}};var pt=H,vt={Promise:ht,polyfill:pt};"function"==typeof define&&define.amd?define(function(){return vt}):"undefined"!=typeof e&&e.exports?e.exports=vt:"undefined"!=typeof this&&(this.ES6Promise=vt),pt()}).call(this)}).call(this,t("IrXUsu"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{IrXUsu:6}],23:[function(t,e,n){"use strict";!function(t,r){"function"==typeof define&&define.amd?define(function(){return t.httppleasepromises=r(t)}):"object"==typeof n?e.exports=r(t):t.httppleasepromises=r(t)}(this,function(t){return function(e){if(e=e||t&&t.Promise,!e)throw new Error("No Promise implementation found.");return{processRequest:function(t){var n,r,o=t.onload,a=t.onerror,i=new e(function(t,e){n=t,r=e});t.onload=function(t){var e;return o&&(e=o.apply(this,arguments)),n(t),e},t.onerror=function(t){var e;return a&&(e=a.apply(this,arguments)),r(t),e},t.then=function(){return i.then.apply(i,arguments)},t["catch"]=function(){return i["catch"].apply(i,arguments)}}}}})},{}],24:[function(t,e,n){"use strict";function r(t,e){var n=new Error(t);n.name="RequestError",this.name=n.name,this.message=n.message,n.stack&&(this.stack=n.stack),this.toString=function(){return this.message};for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}var o=t("./response");r.prototype=Error.prototype,r.create=function(t,e,n){var a=new r(t,n);return o.call(a,e),a},e.exports=r},{"./response":27}],25:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var a,h,p,v,g;for(n=new l(d(t,n)),o=0;o<e.length;o++)h=e[o],h.processRequest&&h.processRequest(n);for(o=0;o<e.length;o++)if(h=e[o],h.createXHR){a=h.createXHR(n);break}a=a||new i,n.xhr=a,p=f(s(function(t){clearTimeout(g),a.onload=a.onerror=a.onreadystatechange=a.ontimeout=a.onprogress=null;var i=t&&t.isHttpError?t:new u(n);for(o=0;o<e.length;o++)h=e[o],h.processResponse&&h.processResponse(i);t?n.onerror&&n.onerror(t):n.onload&&n.onload(i),r&&r(t,i)})),a.onreadystatechange=function(){if(!n.timedOut)if(n.aborted)p(c("Request aborted",n,{name:"Abort"}));else if(4===a.readyState){var t=Math.floor(a.status/100);if(2===t)p();else if(404!==a.status||n.errorOn404){var e;switch(t){case 4:e="Client";break;case 5:e="Server";break;default:e="HTTP"}var r=e+" Error: The server returned a status of "+a.status+' for the request "'+n.method.toUpperCase()+" "+n.url+'"';p(c(r,n))}else p()}},a.onload=function(){p()},a.onerror=function(){p(c("Internal XHR Error",n))},a.ontimeout=function(){},a.onprogress=function(){},a.open(n.method,n.url),n.timeout&&(g=setTimeout(function(){n.timedOut=!0,p(c("Request timeout",n,{name:"Timeout"}));try{a.abort()}catch(t){}},n.timeout));for(v in n.headers)n.headers.hasOwnProperty(v)&&a.setRequestHeader(v,n.headers[v]);return a.send(n.body),n}t=t||{},e=e||[];var a,h=["get","post","put","head","patch","delete"],p=function(t){return function(e,r){return e=new l(e),e.method=t,n(e,r)}};for(o=0;o<h.length;o++)a=h[o],n[a]=p(a);return n.plugins=function(){return e},n.defaults=function(n){return n?r(d(t,n),e):t},n.use=function(){var n=Array.prototype.slice.call(arguments,0);return r(t,e.concat(n))},n.bare=function(){return r()},n.Request=l,n.Response=u,n}var o,a=t("../plugins/cleanurl"),i=t("./xhr"),s=t("./utils/delay"),c=t("./error").create,u=t("./response"),l=t("./request"),d=t("xtend"),f=t("./utils/once");e.exports=r({},[a])},{"../plugins/cleanurl":32,"./error":24,"./request":26,"./response":27,"./utils/delay":28,"./utils/once":29,"./xhr":30,xtend:31}],26:[function(t,e,n){"use strict";function r(t){var e="string"==typeof t?{url:t}:t||{};this.method=e.method?e.method.toUpperCase():"GET",this.url=e.url,this.headers=e.headers||{},this.body=e.body,this.timeout=e.timeout||0,this.errorOn404=null!=e.errorOn404?e.errorOn404:!0,this.onload=e.onload,this.onerror=e.onerror}r.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this)},r.prototype.header=function(t,e){var n;for(n in this.headers)if(this.headers.hasOwnProperty(n)&&t.toLowerCase()===n.toLowerCase()){if(1===arguments.length)return this.headers[n];delete this.headers[n];break}return null!=e?(this.headers[t]=e,e):void 0},e.exports=r},{}],27:[function(t,e,n){"use strict";function r(t){var e,n,r,o=t.xhr;if(this.request=t,this.xhr=o,this.headers={},!t.aborted&&!t.timedOut){if(this.status=o.status||0,this.text=o.responseText,this.body=o.response||o.responseText,this.contentType=o.contentType||o.getResponseHeader&&o.getResponseHeader("Content-Type"),o.getAllResponseHeaders)for(n=o.getAllResponseHeaders().split("\n"),e=0;e<n.length;e++)(r=n[e].match(/\s*([^\s]+):\s+([^\s]+)/))&&(this.headers[r[1]]=r[2]);this.isHttpError=this.status>=400}}var o=t("./request");r.prototype.header=o.prototype.header,e.exports=r},{"./request":26}],28:[function(t,e,n){"use strict";e.exports=function(t){return function(){var e=Array.prototype.slice.call(arguments,0),n=function(){return t.apply(null,e)};setTimeout(n,0)}}},{}],29:[function(t,e,n){"use strict";e.exports=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments)),e}}},{}],30:[function(t,e,n){e.exports=window.XMLHttpRequest},{}],31:[function(t,e,n){function r(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}e.exports=r},{}],32:[function(t,e,n){"use strict";e.exports={processRequest:function(t){t.url=t.url.replace(/[^%]+/g,function(t){return encodeURI(t)})}}},{}],33:[function(t,e,n){"use strict";var r=t("./jsonrequest"),o=t("./jsonresponse");e.exports={processRequest:function(t){r.processRequest.call(this,t),o.processRequest.call(this,t)},processResponse:function(t){o.processResponse.call(this,t)}}},{"./jsonrequest":34,"./jsonresponse":35}],34:[function(t,e,n){"use strict";e.exports={processRequest:function(t){var e=t.header("Content-Type"),n=e&&-1!==e.indexOf("application/json");(null==e||n)&&t.body&&(e||t.header("Content-Type","application/json"),t.body=JSON.stringify(t.body))}}},{}],35:[function(t,e,n){"use strict";e.exports={processRequest:function(t){var e=t.header("Accept");null==e&&t.header("Accept","application/json")},processResponse:function(t){if(t.contentType&&/^.*\/(?:.*\+)?json(;|$)/i.test(t.contentType)){var e="string"==typeof t.body?t.body:t.text;e&&(t.body=JSON.parse(e))}}}},{}],36:[function(t,e,n){var r=t("httpplease"),o=t("tnt.api"),a=t("httpplease-promises"),i=t("es6-promise").Promise,s=t("httpplease/plugins/json");r=r.use(s).use(a(i)),tnt_eRest=function(){var t={proxyUrl:"https://rest.ensembl.org"},e=0,n=function(){};n.limits={region:5e6};var a=o(n);a.getset(t),a.method("call",function(t,e){return e?r.post({url:t,body:e}):r.get({url:t})}),a.method("region2genes",function(t){for(var e={},n=[],r={},o=0;o<t.length;o++){var a=t[o];"transcript"==a.feature_type&&(a.display_name=a.external_name,r[a.id]=a,void 0===e[a.Parent]&&(e[a.Parent]=[]),e[a.Parent].push(a))}for(var i=0;i<t.length;i++){var a=t[i];if("exon"===a.feature_type){var s=r[a.Parent];void 0===s.Exon&&(s.Exon=[]),s.Exon.push(a)}}for(var c=0;c<t.length;c++){var a=t[c];if("cds"===a.feature_type){var s=r[a.Parent];void 0===s.Translation&&(s.Translation=a),a.start<s.Translation.start&&(s.Translation.start=a.start),a.end>s.Translation.end&&(s.Translation.end=a.end)}}for(var u=0;u<t.length;u++){var a=t[u];"gene"===a.feature_type&&(a.display_name=a.external_name,a.Transcript=e[a.id],n.push(a))}return n}),n.url={};var i=o(n.url);return i.method("region",function(e){var n="/overlap/region/",r=e.features||["gene"],o=r.map(function(t){return"feature="+t}),a=o.join("&");return t.proxyUrl+n+e.species+"/"+e.chr+":"+e.from+"-"+e.to+".json?"+a}),i.method("xref",function(e){var n="/xrefs/symbol/";return t.proxyUrl+n+e.species+"/"+e.name+".json?object_type=gene"}),i.method("homologues",function(e){var n="/homology/id/",r=e.format||"condensed",o="";e.target_species&&e.target_species.length&&(o=e.target_species.map(function(t){return"target_species="+t}).join(";"));var a="";e.target_taxons&&e.target_taxons.length&&(a=e.target_taxons.map(function(t){return"target_taxon="+t}).join(";"));var i=t.proxyUrl+n+e.id+".json?format="+r+";sequence=none;type=all";return o&&(i+=";"+o),a&&(i+=";"+a),i}),i.method("gene",function(e){var n="/lookup/id/",r=t.proxyUrl+n+e.id+".json?format=full";return e.expand&&(r+="&expand=1"),r}),i.method("chr_info",function(e){var n="/info/assembly/";return t.proxyUrl+n+e.species+"/"+e.chr+".json?format=full"}),i.method("aln_block",function(e){for(var n="/alignment/region/",r=t.proxyUrl+n+e.species+"/"+e.chr+":"+e.from+"-"+e.to+".json?method="+e.method,o=0;o<e.species_set.length;o++)r+="&species_set="+e.species_set[o];return r}),i.method("sequence",function(e){var n="/sequence/region/";return t.proxyUrl+n+e.species+"/"+e.chr+":"+e.from+".."+e.to+"?content-type=application/json"}),i.method("variation",function(e){var n="/variation/";return t.proxyUrl+n+e.species}),i.method("gene_tree",function(e){var n=void 0===e.member_id?"/genetree/id/":"/genetree/member/id/",r=e.member_id||e.id,o=e.sequence?e.sequence:"protein",a=e.aligned?1:0,i=e.species,s="";i&&i.length&&(s=i.map(function(t){return"species="+t}).join(";"));var c=t.proxyUrl+n+r+".json?sequence="+o+";aligned="+a;return s&&(c+=";"+s),c}),i.method("assembly",function(e){var n="/info/assembly/";return t.proxyUrl+n+e.species+".json"}),a.method("connections",function(){return e}),n},e.exports=n=tnt_eRest},{"es6-promise":22,httpplease:25,"httpplease-promises":23,"httpplease/plugins/json":33,"tnt.api":7}],37:[function(t,e,n){e.exports=t("./src/newick.js")},{"./src/newick.js":38}],38:[function(t,e,n){e.exports={parse_newick:function(t){for(var e,n=[],r={},o=t.split(/\s*(;|\(|\)|,|:)\s*/),a=0;a<o.length;a++){var i=o[a];switch(i){case"(":e={},r.children=[e],n.push(r),r=e;break;case",":e={},n[n.length-1].children.push(e),r=e;break;case")":r=n.pop();break;case":":break;default:var s=o[a-1];")"==s||"("==s||","==s?r.name=i:":"==s&&(r.branch_length=parseFloat(i))}}return r},parse_nhx:function(t){for(var e,n=[],r={},o=t.split(/\s*(;|\(|\)|\[|\]|,|:|=)\s*/),a=0;a<o.length;a++){var i=o[a];switch(i){case"(":e={},r.children=[e],n.push(r),r=e;break;case",":e={},n[n.length-1].children.push(e),r=e;break;case")":r=n.pop();break;case":":break;default:var s=o[a-1];if(")"==s||"("==s||","==s)r.name=i;else if(":"==s){isNaN(i)||(r.branch_length=parseFloat(i))}else if("="==s){var c=o[a-2];switch(c){case"D":r.duplication=i;break;case"G":r.gene_id=i;break;case"T":r.taxon_id=i;break;default:r[o[a-2]]=i}}else;}}return r}}},{}],39:[function(t,e,n){var r=t("./src/node.js");e.exports=n=r},{"./src/node.js":44}],40:[function(t,e,n){e.exports=t(10)},{"./src/index.js":41}],41:[function(t,e,n){e.exports=t(11)},{"./reduce.js":42,"./utils.js":43}],42:[function(t,e,n){e.exports=t(12)},{}],43:[function(t,e,n){e.exports=t(13)},{}],44:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.utils").iterator,a=function(t){"use strict";var e=function(){},n=r(e),i=function(t,e){if(e(t),void 0!==t.children)for(var n=0;n<t.children.length;n++)i(t.children[n],e)},s=function(){var e=o(1);i(t,function(t){void 0===t._id&&(t._id=e())})},c=function(t){if(void 0!==t&&void 0!==t.children)for(var e=0;e<t.children.length;e++)t.children[e]._parent=t,c(t.children[e])},u=function(t){i(t,function(t){var e;if(void 0===t._parent)t._root_dist=0;else{var e=0;t.branch_length&&(e=t.branch_length),t._root_dist=e+t._parent._root_dist}})};e.data=function(n){return arguments.length?(t=n,s(),c(t),u(t),e):t},e.data(t),n.method("find_all",function(t,n){var r=[];return e.apply(function(e){t(e)&&r.push(e)}),r}),n.method("find_node",function(n,r){if(n(e))return e;if(void 0!==t.children)for(var o=0;o<t.children.length;o++){var i=a(t.children[o]).find_node(n,r);if(i)return i}if(r&&void 0!==t._children)for(var s=0;s<t._children.length;s++){a(t._children[s]).find_node(n,r);var i=a(t._children[s]).find_node(n,r);if(i)return i}}),n.method("find_node_by_name",function(t,n){return e.find_node(function(e){return e.node_name()===t},n)}),n.method("toggle",function(){if(t)if(t.children){var n=0;e.apply(function(t){t.n_hidden()||0;n+=(t.n_hidden()||0)+1}),e.n_hidden(n-1),t._children=t.children,t.children=void 0}else e.n_hidden(0),t.children=t._children,t._children=void 0;return this}),n.method("is_collapsed",function(){return void 0!==t._children&&void 0===t.children});var l=function(t,e){if(t=t.data(),e=e.data(),void 0===t._parent)return!1;for(t=t._parent;;){if(void 0===t)return!1;if(t===e)return!0;t=t._parent}};n.method("lca",function(t){if(1===t.length)return t[0];for(var e=t[0],n=1;n<t.length;n++)e=d(e,t[n]);return e});var d=function(t,e){return t.data()===e.data()?t:l(t,e)?e:d(t,e.parent())};n.method("n_hidden",function(t){return arguments.length?(e.property("_hidden",t),e):e.property("_hidden")}),n.method("get_all_nodes",function(t){var n=[];return e.apply(function(t){n.push(t)},t),n}),n.method("get_all_leaves",function(t){var n=[];return e.apply(function(e){e.is_leaf(t)&&n.push(e)},t),n}),n.method("upstream",function(t){t(e);var n=e.parent();void 0!==n&&n.upstream(t)}),n.method("subtree",function(e,n){void 0===n&&(n=!1);for(var r={},o=0;o<e.length;o++){var i=e[o];void 0!==i&&i.upstream(function(t){var e=t.id();void 0===r[e]&&(r[e]=0),r[e]++})}var s=function(t){var e=0;if(void 0===t.children)return!1;for(var n=0;n<t.children.length;n++){var o=t.children[n]._id;r[o]>0&&e++}return 1===e},c={};return f(t,c,0,function(t){var e=t._id,o=r[e];return o>0?s(t)&&!n?!1:!0:!1}),a(c.children[0])});var f=function(t,e,n,r){if(void 0!==t)if(r(t)){var o=h(t,n);if(void 0===e.children&&(e.children=[]),e.children.push(o),void 0===t.children)return;for(var a=0;a<t.children.length;a++)f(t.children[a],o,0,r)}else{if(void 0===t.children)return;n+=t.branch_length||0;for(var a=0;a<t.children.length;a++)f(t.children[a],e,n,r)}},h=function(t,e){var n={};for(var r in t)"children"!==r&&"_children"!==r&&"_parent"!==r&&"depth"!==r&&t.hasOwnProperty(r)&&(n[r]=t[r]);return void 0!==n.branch_length&&void 0!==e&&(n.branch_length+=e),n};return n.method("present",function(t){var n=!1;return e.apply(function(e){t(e)===!0&&(n=!0)}),n}),n.method("sort",function(e){if(void 0!==t.children){for(var n=[],r=0;r<t.children.length;r++)n.push(a(t.children[r]));n.sort(e),t.children=[];for(var r=0;r<n.length;r++)t.children.push(n[r].data());for(var r=0;r<t.children.length;r++)a(t.children[r]).sort(e)}}),n.method("flatten",function(t){if(e.is_leaf())return e;var n,r=e.data(),o=h(r);t?(n=e.get_all_nodes(),n.shift()):n=e.get_all_leaves(),o.children=[];for(var i=0;i<n.length;i++)delete n[i].children,o.children.push(h(n[i].data()));return a(o)}),n.method("apply",function(n,r){if(void 0===r&&(r=!1),n(e),void 0!==t.children)for(var o=0;o<t.children.length;o++){var i=a(t.children[o]);i.apply(n,r)}if(void 0!==t._children&&r)for(var s=0;s<t._children.length;s++){var i=a(t._children[s]);i.apply(n,r)}}),n.method("property",function(n,r){return 1===arguments.length?"function"==typeof n?n(t):t[n]:("function"==typeof n&&n(t,r),t[n]=r,e)}),n.method("is_leaf",function(e){return e?void 0===t.children&&void 0===t._children:void 0===t.children}),n.method("id",function(){return e.property("_id")}),n.method("node_name",function(){return e.property("name")}),n.method("branch_length",function(){return e.property("branch_length")}),n.method("root_dist",function(){return e.property("_root_dist")}),n.method("children",function(e){var n=[];if(t.children)for(var r=0;r<t.children.length;r++)n.push(a(t.children[r]));if(t._children&&e)for(var o=0;o<t._children.length;o++)n.push(a(t._children[o]));if(0!==n.length)return n}),n.method("parent",function(){return void 0!==t._parent?a(t._parent):void 0}),e};e.exports=n=a},{"tnt.api":7,"tnt.utils":40}],45:[function(t,e,n){e.exports=tree=t("./src/index.js");var r=t("biojs-events");r.mixin(tree)},{"./src/index.js":56,"biojs-events":46}],46:[function(t,e,n){e.exports=t(3)},{"backbone-events-standalone":48}],47:[function(t,e,n){e.exports=t(4)},{}],48:[function(t,e,n){e.exports=t(5)},{"./backbone-events-standalone":47}],49:[function(t,e,n){e.exports=t(39)},{"./src/node.js":54}],50:[function(t,e,n){e.exports=t(10)},{"./src/index.js":51}],51:[function(t,e,n){e.exports=t(11)},{"./reduce.js":52,"./utils.js":53}],52:[function(t,e,n){e.exports=t(12)},{}],53:[function(t,e,n){e.exports=t(13)},{}],54:[function(t,e,n){e.exports=t(44)},{"tnt.api":7,"tnt.utils":50}],55:[function(t,e,n){var r=t("tnt.api"),o={};o.diagonal=function(){var t=function(e){var r=e.source,o=e.target,a=((r.x+o.x)/2,(r.y+o.y)/2,[r,{x:o.x,y:r.y},o]);return a=a.map(t.projection()),t.path()(a,n.call(this,a))},e=(r(t).getset("projection").getset("path"),function(t,e){var n,r=2*Math.PI,o=r/4,a=t[0]>=0?t[1]>=0?1:2:t[1]>=0?4:3,i=Math.abs(Math.asin(t[1]/e));switch(a){case 1:n=o-i;break;case 2:n=o+i;break;case 3:n=2*o+o-i;break;case 4:n=3*o+i}return n}),n=function(t){var n=t[0],r=t[1],o=(t[2],Math.sqrt(n[0]*n[0]+n[1]*n[1])),a=e(n,o),i=e(r,o),s=Math.abs(i-a)>Math.PI?a>=i:i>a;return{radius:o,clockwise:s}};return t},o.diagonal.vertical=function(){var t=function(t,e){var n=t[0],r=t[1],o=t[2],a=2e5;return"M"+n+" A"+[a,a]+" 0 0,0 "+r+"M"+r+"L"+o},e=function(t){return[t.y,t.x]};return o.diagonal().path(t).projection(e)},o.diagonal.radial=function(){var t=function(t,e){var n=t[0],r=t[1],o=t[2],a=e.radius,i=e.clockwise;return i?"M"+n+" A"+[a,a]+" 0 0,0 "+r+"M"+r+"L"+o:"M"+r+" A"+[a,a]+" 0 0,0 "+n+"M"+r+"L"+o},e=function(t){var e=t.y,n=(t.x-90)/180*Math.PI;return[e*Math.cos(n),e*Math.sin(n)]};return o.diagonal().path(t).projection(e)},e.exports=n=o.diagonal},{"tnt.api":7}],56:[function(t,e,n){var r=t("./tree.js");r.label=t("./label.js"),r.diagonal=t("./diagonal.js"),r.layout=t("./layout.js"),r.node_display=t("./node_display.js"),e.exports=n=r},{"./diagonal.js":55,"./label.js":57,"./layout.js":58,"./node_display.js":59,"./tree.js":60}],57:[function(t,e,n){var r=t("tnt.api"),o={};o.label=function(){"use strict";var t=d3.dispatch("click","dblclick","mouseover","mouseout"),e=function(n,r,o){if("function"!=typeof n)throw n;e.display().call(this,n,r).attr("class","tnt_tree_label").attr("transform",function(t){var a=e.transform()(n,r);return"translate ("+(a.translate[0]+o)+" "+a.translate[1]+")rotate("+a.rotate+")"}).on("click",function(){t.click.call(this,n)}).on("dblclick",function(){t.dblclick.call(this,n)}).on("mouseover",function(){t.mouseover.call(this,n)}).on("mouseout",function(){t.mouseout.call(this,n)})};r(e).getset("width",function(){throw"Need a width callback"}).getset("height",function(){throw"Need a height callback"}).getset("display",function(){throw"Need a display callback"}).getset("transform",function(){throw"Need a transform callback"});return d3.rebind(e,t,"on")},o.label.text=function(){var t=o.label();r(t).getset("fontsize",10).getset("fontweight","normal").getset("color","#000").getset("text",function(t){return t.data().name});return t.display(function(e,n){var r=d3.select(this).append("text").attr("text-anchor",function(t){return"radial"===n?t.x%360<180?"start":"end":"start"}).text(function(){return t.text()(e)}).style("font-size",function(){return d3.functor(t.fontsize())(e)+"px"}).style("font-weight",function(){return d3.functor(t.fontweight())(e)}).style("fill",d3.functor(t.color())(e));return r}),t.transform(function(e,n){var r=e.data(),o={translate:[5,5],rotate:0};return"radial"===n&&(o.translate[1]=o.translate[1]-(r.x%360<180?0:t.fontsize()),o.rotate=r.x%360<180?0:180),o}),t.width(function(e){var n=d3.select("body").append("svg").attr("height",0).style("visibility","hidden"),r=n.append("text").style("font-size",d3.functor(t.fontsize())(e)+"px").text(t.text()(e)),o=r.node().getBBox().width;return n.remove(),o}),t.height(function(e){return d3.functor(t.fontsize())(e)}),t},o.label.img=function(){var t=o.label();r(t).getset("src",function(){});return t.display(function(e,n){if(t.src()(e)){var r=d3.select(this).append("image").attr("width",t.width()()).attr("height",t.height()()).attr("xlink:href",t.src()(e));return r}return d3.select(this).append("text").text("")}),t.transform(function(e,n){var r=e.data(),o={translate:[10,-t.height()()/2],rotate:0};return"radial"===n&&(o.translate[0]=o.translate[0]+(r.x%360<180?0:t.width()()),o.translate[1]=o.translate[1]+(r.x%360<180?0:t.height()()),o.rotate=r.x%360<180?0:180),o}),t},o.label.composite=function(){var t=[],e=function(e,n,r){for(var o=0,a=0;a<t.length;a++){var i=t[a];!function(t){i.transform(function(e,n){var r=i._super_.transform()(e,n),o={translate:[t+r.translate[0],r.translate[1]],rotate:r.rotate};return o})}(o),o+=10,o+=i.width()(e),i.call(this,e,n,r)}},n=r(e);return n.method("add_label",function(n,o){return n._super_={},r(n._super_).get("transform",n.transform()),t.push(n),e}),n.method("width",function(){return function(e){for(var n=0,r=0;r<t.length;r++)n+=parseInt(t[r].width()(e)),n+=parseInt(t[r]._super_.transform()(e).translate[0]);return n}}),n.method("height",function(){return function(e){for(var n=0,r=0;r<t.length;r++){var o=t[r].height()(e);o>n&&(n=o)}return n}}),e},e.exports=n=o.label},{"tnt.api":7}],58:[function(t,e,n){var r=t("tnt.api"),o=t("./diagonal.js"),a={};a.layout=function(){var t=function(){},e=d3.layout.cluster().sort(null).value(function(t){return t.length}).separation(function(){return 1}),n=r(t).getset("scale",!0).getset("max_leaf_label_width",0).method("cluster",e).method("yscale",function(){throw"yscale is not defined in the base object"}).method("adjust_cluster_size",function(){throw"adjust_cluster_size is not defined in the base object"}).method("width",function(){throw"width is not defined in the base object"}).method("height",function(){throw"height is not defined in the base object"});return n.method("scale_branch_lengths",function(e){if(t.scale()!==!1){var n=e.nodes,r=e.tree,o=n.map(function(t){return t._root_dist}),a=t.yscale(o);r.apply(function(t){t.property("y",a(t.root_dist()))})}}),t},a.layout.vertical=function(){var t=a.layout();t.type="vertical";var e=r(t).getset("width",360).get("translate_vis",[20,20]).method("diagonal",o.vertical).method("transform_node",function(t){return"translate("+t.y+","+t.x+")"});return e.method("height",function(t){return t.n_leaves*t.label_height}),e.method("yscale",function(e){return d3.scale.linear().domain([0,d3.max(e)]).range([0,t.width()-20-t.max_leaf_label_width()])}),e.method("adjust_cluster_size",function(e){var n=t.height(e),r=t.width()-t.max_leaf_label_width()-t.translate_vis()[0]-e.label_padding;return t.cluster.size([n,r]),t}),t},a.layout.radial=function(){var t=a.layout();t.type="radial";var e=360,n=e/2,i={width:360},s=r(t).getset(i).getset("translate_vis",[n,n]).method("transform_node",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"}).method("diagonal",o.radial).method("height",function(){return i.width});return t.width.transform(function(e){return n=e/2,t.cluster.size([360,n]),t.translate_vis([n,n]),e}),s.method("yscale",function(t){return d3.scale.linear().domain([0,d3.max(t)]).range([0,n])}),s.method("adjust_cluster_size",function(e){return n=t.width()/2-t.max_leaf_label_width()-20,t.cluster.size([360,n]),t}),t},e.exports=n=a.layout},{"./diagonal.js":55,"tnt.api":7}],59:[function(t,e,n){var r=t("tnt.api"),o={};o.node_display=function(){"use strict";var t=function(e){var n,r=d3.select(this).select(".tnt_tree_node_proxy");if(null===r[0][0]){d3.functor(t.size())(e);n=d3.select(this).append("rect").attr("class","tnt_tree_node_proxy")}else n=r;t.display().call(this,e);var o=this.getBBox();n.attr("x",o.x).attr("y",o.y).attr("width",o.width).attr("height",o.height)},e=r(t).getset("size",4.4).getset("fill","black").getset("stroke","black").getset("stroke_width","1px").getset("display",function(){throw"display is not defined in the base object"});return e.method("reset",function(){d3.select(this).selectAll("*:not(.tnt_tree_node_proxy)").remove()}),t},o.node_display.circle=function(){var t=o.node_display();return t.display(function(e){d3.select(this).append("circle").attr("r",function(n){return d3.functor(t.size())(e)}).attr("fill",function(n){return d3.functor(t.fill())(e)}).attr("stroke",function(n){return d3.functor(t.stroke())(e)}).attr("stroke-width",function(n){return d3.functor(t.stroke_width())(e)}).attr("class","tnt_node_display_elem")}),t},o.node_display.square=function(){var t=o.node_display();return t.display(function(e){var n=d3.functor(t.size())(e);d3.select(this).append("rect").attr("x",function(t){return-n}).attr("y",function(t){return-n}).attr("width",function(t){return 2*n}).attr("height",function(t){return 2*n}).attr("fill",function(n){return d3.functor(t.fill())(e)}).attr("stroke",function(n){return d3.functor(t.stroke())(e)}).attr("stroke-width",function(n){return d3.functor(t.stroke_width())(e)}).attr("class","tnt_node_display_elem")}),t},o.node_display.triangle=function(){var t=o.node_display();return t.display(function(e){var n=d3.functor(t.size())(e);d3.select(this).append("polygon").attr("points",-n+",0 "+n+","+-n+" "+n+","+n).attr("fill",function(n){return d3.functor(t.fill())(e)}).attr("stroke",function(n){return d3.functor(t.stroke())(e)}).attr("stroke-width",function(n){return d3.functor(t.stroke_width())(e)}).attr("class","tnt_node_display_elem")}),t},e.exports=n=o.node_display},{"tnt.api":7}],60:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.tree.node"),a=function(){"use strict";var t,e,n,i,s,c,u=d3.dispatch("click","dblclick","mouseover","mouseout"),l={duration:500,node_display:a.node_display.circle(),label:a.label.text(),layout:a.layout.vertical(),branch_color:"black",id:function(t){return t._id}},d="cubic-in-out",f={tree:void 0,data:void 0,nodes:void 0,links:void 0},h={tree:void 0,data:void 0,nodes:void 0,links:void 0},p=function(t){e=d3.select(t).attr("id");var r=d3.select(t).append("div").style("width",l.layout.width()+"px").attr("class","tnt_groupDiv"),f=l.layout.cluster,g=h.tree.get_all_leaves().length,_=function(t){for(var e=0,n=t.get_all_leaves(),r=0;r<n.length;r++){var o=l.label.width()(n[r])+d3.functor(l.node_display.size())(n[r]);o>e&&(e=o)}return e},m=function(t){for(var e=0,n=t.get_all_leaves(),r=0;r<n.length;r++){var o=2*d3.functor(l.node_display.size())(n[r]),a=d3.functor(l.label.height())(n[r]);e=d3.max([e,o,a])}return e},y=_(h.tree);l.layout.max_leaf_label_width(y);var b=m(h.tree),x={n_leaves:g,label_height:b,label_padding:15};l.layout.adjust_cluster_size(x);var w=l.layout.diagonal(),k=l.layout.transform_node;n=r.append("svg").attr("width",l.layout.width()).attr("height",l.layout.height(x)+30).attr("fill","none"),i=n.append("g").attr("id","tnt_st_"+e).attr("transform","translate("+l.layout.translate_vis()[0]+","+l.layout.translate_vis()[1]+")"),h.nodes=f.nodes(h.data),l.layout.scale_branch_lengths(h),h.links=f.links(h.nodes),s=i.append("g").attr("class","links"),c=i.append("g").attr("class","nodes");var j=s.selectAll("path.tnt_tree_link").data(h.links,function(t){return l.id(t.target)});j.enter().append("path").attr("class","tnt_tree_link").attr("id",function(t){return"tnt_tree_link_"+e+"_"+l.id(t.target)}).style("stroke",function(t){return d3.functor(l.branch_color)(o(t.source),o(t.target))}).attr("d",w);var A=c.selectAll("g.tnt_tree_node").data(h.nodes,function(t){return l.id(t)}),T=A.enter().append("g").attr("class",function(t){return t.children?0===t.depth?"root tnt_tree_node":"inner tnt_tree_node":"leaf tnt_tree_node"}).attr("id",function(t){return"tnt_tree_node_"+e+"_"+t._id}).attr("transform",k);T.each(function(t){l.node_display.call(this,o(t))}),T.each(function(t){l.label.call(this,o(t),l.layout.type,d3.functor(l.node_display.size())(o(t)))}),T.on("click",function(t){var e=o(t);a.trigger("node:click",e),u.click.call(this,e)}),T.on("dblclick",function(t){var e=o(t);a.trigger("node:dblclick",e),u.dblclick.call(this,e)}),T.on("mouseover",function(t){var e=o(t);a.trigger("node:hover",o(t)),u.mouseover.call(this,e)}),T.on("mouseout",function(t){var e=o(t);a.trigger("node:mouseout",o(t)),u.mouseout.call(this,e)}),v.method("update",function(){r.style("width",l.layout.width()+"px"),n.attr("width",l.layout.width());var t=l.layout.cluster,f=l.layout.diagonal(),v=l.layout.transform_node,g=_(h.tree);l.layout.max_leaf_label_width(g);var y=m(h.tree),b=h.tree.get_all_leaves().length,x={n_leaves:b,label_height:y,label_padding:15};l.layout.adjust_cluster_size(x),n.transition().duration(l.duration).ease(d).attr("height",l.layout.height(x)+30),i.transition().duration(l.duration).attr("transform","translate("+l.layout.translate_vis()[0]+","+l.layout.translate_vis()[1]+")"),h.nodes=t.nodes(h.data),l.layout.scale_branch_lengths(h),h.links=t.links(h.nodes);var w=s.selectAll("path.tnt_tree_link").data(h.links,function(t){return l.id(t.target)}),k=c.selectAll("g.tnt_tree_node").data(h.nodes,function(t){return l.id(t)});w.exit().remove();w.enter().append("path").attr("class","tnt_tree_link").attr("id",function(t){return"tnt_tree_link_"+e+"_"+l.id(t.target)}).attr("stroke",function(t){return d3.functor(l.branch_color)(o(t.source),o(t.target))}).attr("d",f),w.transition().ease(d).duration(l.duration).attr("d",f);var j=k.enter().append("g").attr("class",function(t){return t.children?0===t.depth?"root tnt_tree_node":"inner tnt_tree_node":"leaf tnt_tree_node"}).attr("id",function(t){return"tnt_tree_node_"+e+"_"+t._id}).attr("transform",v);k.exit().remove(),j.on("click",function(t){var e=o(t);a.trigger("node:click",e),u.click.call(this,e)}),j.on("dblclick",function(t){var e=o(t);a.trigger("node:dblclick",e),u.dblclick.call(this,e)}),j.on("mouseover",function(t){var e=o(t);a.trigger("node:hover",o(t)),u.mouseover.call(this,e)}),j.on("mouseout",function(t){var e=o(t);a.trigger("node:mouseout",o(t)),u.mouseout.call(this,e)}),p.update_nodes(),k.transition().ease(d).duration(l.duration).attr("transform",v)}),v.method("update_nodes",function(){var t=c.selectAll("g.tnt_tree_node");t.each(function(){l.node_display.reset.call(this)}),t.each(function(t){l.node_display.call(this,o(t))}),t.each(function(t){l.label.call(this,o(t),l.layout.type,d3.functor(l.node_display.size())(o(t)))})})},v=r(p).getset(l);return v.method("data",function(t){if(!arguments.length)return f.data;f.data=t,h.data=t;var e=o(f.data);return p.root(e),a.trigger("data:hasChanged",f.data),this}),v.method("root",function(t){return arguments.length?(f.tree=t,h.tree=f.tree,this):h.tree}),v.method("subtree",function(t,e){var n=f.tree.subtree(t,e);return h.data=n.data(),h.tree=n,this}),v.method("focus_node",function(e,n){var r=p.root().find_node(function(t){return e.id()===t.id()});return t=r,p.subtree(r.get_all_leaves(),n),this}),v.method("has_focus",function(e){return void 0!==t&&t.id()===e.id()}),v.method("release_focus",function(){return p.data(f.data),t=void 0,this}),d3.rebind(p,u,"on")};e.exports=n=a},{"tnt.api":7,"tnt.tree.node":49}],61:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{"./src/index.js":62}],62:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"./reduce.js":63,"./utils.js":64}],63:[function(t,e,n){e.exports=t(12)},{}],64:[function(t,e,n){e.exports={iterator:function(t){var e=t||0,n=function(){return e++};return n},script_path:function(t){var e=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),n=new RegExp(e+"$"),r=new RegExp("(.*)"+e+"$"),o=document.getElementsByTagName("script"),a="";if(void 0!==o)for(var i in o)if(o[i].src&&o[i].src.match(n))return o[i].src.replace(r,"$1");return a},defer_cancel:function(t,e){var n,r=function(){var r=Array.prototype.slice.call(arguments),o=this;clearTimeout(n),n=setTimeout(function(){t.apply(o,r)},e)};return r}}},{}],65:[function(t,e,n){var r=t("tnt.api"),o=function(){"use strict";var t,e=!0,n={tree:void 0,track:function(){var t=tnt.board.track().color("#EBF5FF").data(tnt.board.track.data().update(tnt.board.track.retriever.sync().retriever(function(){
return[]}))).display(tnt.board.track.feature.block().color("steelblue").index(function(t){return t.start}));return t},board:void 0,ruler:"none",key:void 0},o=function(e){t=d3.select(e).attr("id");var r=d3.select(e).append("div").attr("class","tnt_groupDiv"),i=r.append("div").attr("id","tnt_tree_container_"+t).attr("class","tnt_tree_container"),s=r.append("div").attr("id","tnt_annot_container_"+t).attr("class","tnt_annot_container");n.tree(i.node());for(var c=n.tree.root().get_all_leaves(),u=[],l=n.tree.label().height(),d=0;d<c.length;d++)!function(t){tnt.board.track.id=function(){return void 0===n.key?t.id():"function"==typeof n.key?n.key(t):t.property(n.key)};var e=n.track(c[d]).height(l);u.push(e)}(c[d]);tnt.board.track.id=function(){return"axis-top"};var f=tnt.board.track().height(0).color("white").display(tnt.board.track.feature.axis().orientation("top"));tnt.board.track.id=function(){return"axis-bottom"};var h=tnt.board.track().height(18).color("white").display(tnt.board.track.feature.axis().orientation("bottom"));return n.board&&(("both"===n.ruler||"top"===n.ruler)&&n.board.add_track(f),n.board.add_track(u),("both"===n.ruler||"bottom"===n.ruler)&&n.board.add_track(h),n.board(s.node()),n.board.start()),a.method("update",function(){if(n.tree.update(),n.board){var t=n.tree.root().get_all_leaves(),e=[];("both"===n.ruler||"top"===n.ruler)&&e.push(f);for(var r=0;r<t.length;r++){var o;o=void 0===n.key?t[r].id():"function"==typeof n.key?n.key(t[r]):t[r].property(n.key);var a=n.board.find_track(o);void 0===a&&!function(e){tnt.board.track.id=function(){return void 0===n.key?e.id():"function"==typeof n.key?n.key(e):e.property(n.key)},a=n.track(t[r]).height(l)}(t[r]),e.push(a)}("both"===n.ruler||"bottom"===n.ruler)&&e.push(h),n.board.tracks(e)}}),o},a=r(o).getset(n);return o.track=function(t){if(!arguments.length)return n.track;if(e)return n.track=t,e=!1,o;var r=n.board.tracks(),a=0,i=0;if("both"===n.ruler?(a=1,i=2):"top"===n.ruler?(a=1,i=1):"bottom"===n.ruler&&(i=1),a>0&&r[0].display().reset.call(r[0]),i>a){var s=r.length-1;r[s].display().reset.call(r[s])}for(var c=a;c<=r.length-i;c++){var u=r[c];u.display().reset.call(u);var l;n.tree.root().apply(function(t){t.id()===u.id()&&(l=t)});var d;!function(e){tnt.board.track.id=function(){return void 0===n.key?e.id():n.key(e)},d=t(e).height(n.tree.label().height())}(l),r[c]=d}n.track=t,n.board.start()},o};e.exports=n=o},{"tnt.api":7}]},{},[1]);