!function t(e,n,r){function o(i,s){if(!n[i]){if(!e[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=n[i]={exports:{}};e[i][0].call(c.exports,function(t){var n=e[i][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(t,e,n){e.exports=t("./index.js")},{"./index.js":2}],2:[function(t,e,n){"undefined"==typeof tnt&&(e.exports=tnt=t("./src/ta.js"));var r=t("biojs-events");r.mixin(tnt),tnt.utils=t("tnt.utils"),tnt.ensembl=t("tnt.ensembl"),tnt.tooltip=t("tnt.tooltip"),tnt.tree=t("tnt.tree"),tnt.tree.node=t("tnt.tree.node"),tnt.tree.parse_newick=t("tnt.newick").parse_newick,tnt.tree.parse_nhx=t("tnt.newick").parse_nhx,tnt.board=t("tnt.board"),tnt.board.genome=t("tnt.genome")},{"./src/ta.js":81,"biojs-events":3,"tnt.board":9,"tnt.ensembl":22,"tnt.genome":40,"tnt.newick":48,"tnt.tooltip":50,"tnt.tree":62,"tnt.tree.node":54,"tnt.utils":77}],3:[function(t,e,n){var r=t("backbone-events-standalone");r.onAll=function(t,e){return this.on("all",t,e),this},r.oldMixin=r.mixin,r.mixin=function(t){r.oldMixin(t);for(var e=["onAll"],n=0;n<e.length;n++){var o=e[n];t[o]=this[o]}return t},e.exports=r},{"backbone-events-standalone":5}],4:[function(t,e,n){!function(){function t(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++u+"";return t?t+e:e},has:function(t,e){return i.call(t,e)},each:function(t,e,n){if(null!=t)if(a&&t.forEach===a)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,o=t.length;o>r;r++)e.call(n,t[r],r,t);else for(var i in t)this.has(t,i)&&e.call(n,t[i],i,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var r,o=this,a=Array.prototype.forEach,i=Object.prototype.hasOwnProperty,s=Array.prototype.slice,u=0,c=t();r={on:function(t,e,n){if(!d(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!d(this,"once",t,[e,n])||!e)return this;var r=this,o=c.once(function(){r.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var r,o,a,i,s,u,l,f;if(!this._events||!d(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(i=t?[t]:c.keys(this._events),s=0,u=i.length;u>s;s++)if(t=i[s],a=this._events[t]){if(this._events[t]=r=[],e||n)for(l=0,f=a.length;f>l;l++)o=a[l],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&r.push(o);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!d(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&f(n,e),r&&f(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var o=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var a in r)r[a].off(e,n,this),o&&delete this._listeners[a];return this}};var l=/\s+/,d=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(r));return!1}if(l.test(n)){for(var a=n.split(l),i=0,s=a.length;s>i;i++)t[e].apply(t,[a[i]].concat(r));return!1}return!0},f=function(t,e){var n,r=-1,o=t.length,a=e[0],i=e[1],s=e[2];switch(e.length){case 0:for(;++r<o;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=t[r]).callback.call(n.ctx,a);return;case 2:for(;++r<o;)(n=t[r]).callback.call(n.ctx,a,i);return;case 3:for(;++r<o;)(n=t[r]).callback.call(n.ctx,a,i,s);return;default:for(;++r<o;)(n=t[r]).callback.apply(n.ctx,e)}},h={listenTo:"on",listenToOnce:"once"};c.each(h,function(t,e){r[e]=function(e,n,r){var o=this._listeners||(this._listeners={}),a=e._listenerId||(e._listenerId=c.uniqueId("l"));return o[a]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),r.bind=r.on,r.unbind=r.off,r.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return c.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=r),n.BackboneEvents=r):"function"==typeof define&&"object"==typeof define.amd?define(function(){return r}):o.BackboneEvents=r}(this)},{}],5:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":4}],6:[function(t,e,n){function r(){}var o=e.exports={};o.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],7:[function(t,e,n){e.exports=t("./src/api.js")},{"./src/api.js":8}],8:[function(t,e,n){var r=function(t){var e=function(){var t=[];return t.add_batch=function(e){t.unshift(e)},t.update=function(e,n){for(var r=0;r<t.length;r++)for(var o in t[r])if(o===e)return t[r][o]=n,!0;return!1},t.add=function(e,n){if(t.update(e,n));else{var r={};r[e]=n,t.add_batch(r)}},t.get=function(e){for(var n=0;n<t.length;n++)for(var r in t[n])if(r===e)return t[n][r]},t},n=e(),r=function(){};r.check=function(e,n,o){if(!(e instanceof Array))return"function"==typeof e?e.check(n,o):t[e].check(n,o),r;for(var a=0;a<e.length;a++)r.check(e[a],n,o)},r.transform=function(e,n){if(!(e instanceof Array))return"function"==typeof e?e.transform(n):t[e].transform(n),r;for(var o=0;o<e.length;o++)r.transform(e[o],n)};var o=function(e,r){var o=[],a=[],i=r.on_getter||function(){return n.get(e)},s=r.on_setter||function(t){for(var r=0;r<a.length;r++)t=a[r](t);for(var i=0;i<o.length;i++)if(!o[i].check(t)){var s=o[i].msg||"Value "+t+" doesn't seem to be valid for this method";throw s}n.add(e,t)},u=function(e){return arguments.length?(s(e),t):i()};u.check=function(t,e){return arguments.length?(o.push({check:t,msg:e}),this):o},u.transform=function(t){return arguments.length?(a.push(t),this):a},t[e]=u},a=function(t,e){if("object"==typeof t){n.add_batch(t);for(var r in t)o(r,e)}else n.add(t,e.default_value),o(t,e)};return r.getset=function(t,e){return a(t,{default_value:e}),r},r.get=function(t,e){var n=function(){throw"Method defined only as a getter (you are trying to use it as a setter"};return a(t,{default_value:e,on_setter:n}),r},r.set=function(t,e){var n=function(){throw"Method defined only as a setter (you are trying to use it as a getter"};return a(t,{default_value:e,on_getter:n}),r},r.method=function(e,n){if("object"==typeof e)for(var o in e)t[o]=e[o];else t[e]=n;return r},r};e.exports=n=r},{}],9:[function(t,e,n){e.exports=t("./src/index")},{"./src/index":19}],10:[function(t,e,n){e.exports=t(7)},{"./src/api.js":11}],11:[function(t,e,n){e.exports=t(8)},{}],12:[function(t,e,n){e.exports=t("./src/index.js")},{"./src/index.js":13}],13:[function(t,e,n){var r=t("./utils.js");r.reduce=t("./reduce.js"),e.exports=n=r},{"./reduce.js":14,"./utils.js":15}],14:[function(t,e,n){var r=function(){var t=5,e="val",n=function(t,e){return e>t?.2*e>=e-t:.2*t>=t-e},r=function(t){return t},o=function(t){if(!t.length)return t;var e=s(t),n=r(e);return n},a=function(t,n){if(n.sort(function(t,n){return t[e]-n[e]}),n.length%2)t[e]=n[~~(n.length/2)][e];else{var r=~~(n.length/2)-1;t[e]=(n[r][e]+n[r+1][e])/2}return t},i=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},s=function(e){if(0===t)return e;for(var n=[],r=0;r<e.length;r++){var o=t>r?0:r-t,s=r>e.length-t?e.length:r+t;n[r]=a(i(e[r]),e.slice(o,s+1))}return n};return o.reducer=function(t){return arguments.length?(r=t,o):r},o.redundant=function(t){return arguments.length?(n=t,o):n},o.value=function(t){return arguments.length?(e=t,o):e},o.smooth=function(e){return arguments.length?(t=e,o):t},o},o=function(){var t=r().value("start"),e="end",n=function(n,r){return{object:{start:n.object[t.value()],end:r[e]},value:r[e]}};return t.reducer(function(r){for(var o=t.value(),a=t.redundant(),i=[],s={object:r[0],value:r[0][e]},u=1;u<r.length;u++)a(r[u][o],s.value)?s=n(s,r[u]):(i.push(s.object),s.object=r[u],s.value=r[u].end);return i.push(s.object),i}),r.join=function(e){return arguments.length?(n=e,t):n},r.value2=function(n){return arguments.length?(e=n,t):e},t},a=function(){var t=r();return t.reducer(function(e){for(var n=t.redundant(),r=t.value(),o=[],a=e[0],i=1;i<e.length-1;i++)n(e[i][r],a[r])||(o.push(a),a=e[i]);return o.push(a),o.push(e[e.length-1]),o}),t};e.exports=r,e.exports.line=a,e.exports.block=o},{}],15:[function(t,e,n){e.exports={iterator:function(t){var e=t||0,n=function(){return e++};return n},script_path:function(t){var e=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),n=new RegExp(e+"$"),r=new RegExp("(.*)"+e+"$"),o=document.getElementsByTagName("script"),a="";if(void 0!==o)for(var i in o)if(o[i].src&&o[i].src.match(n))return o[i].src.replace(r,"$1");return a},defer_cancel:function(t,e){var n,r=function(){clearTimeout(n),n=setTimeout(t,e)};return r}}},{}],16:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.utils").defer_cancel,a=function(){"use strict";function t(t){t.parentNode.appendChild(t)}var e,n,a,i,s,u=[],c=50,l=0,d=920,f=20,h={species:void 0,chr:void 0,from:0,to:500},p=d3.rgb("#F8FBEF"),v=d3.behavior.zoom(),g={left:0,right:1e3,zoom_out:1e3,zoom_in:100},_=3,m=500,y=!0,x={ease:d3.ease("cubic-in-out"),extend_canvas:{left:0,right:0},show_frame:!0},b=function(t){n=d3.select(t).attr("id"),d3.select(t).classed("tnt",!0);var r=d3.select(t).append("div").attr("id","tnt_"+n).style("position","relative").classed("tnt_framed",x.show_frame?!0:!1).style("width",d+2*_+x.extend_canvas.right+x.extend_canvas.left+"px"),o=r.append("div").attr("class","tnt_groupDiv");e=o.append("svg").attr("class","tnt_svg").attr("width",d).attr("height",l).attr("pointer-events","all"),i=e.append("g").attr("transform","translate(0,20)").append("g").attr("class","tnt_g"),i.append("rect").attr("id","tnt_"+n+"_5pcap").attr("x",0).attr("y",0).attr("width",0).attr("height",l).attr("fill","red"),i.append("rect").attr("id","tnt_"+n+"_3pcap").attr("x",d-_).attr("y",0).attr("width",0).attr("height",l).attr("fill","red"),a=i.append("rect").attr("class","tnt_pane").attr("id","tnt_"+n+"_pane").attr("width",d).attr("height",l).style("fill",p)},k=r(b).getset(x).getset(g).getset(h);k.transform(b.extend_canvas,function(t){var e=b.extend_canvas();return t.left=t.left||e.left,t.right=t.right||e.right,t}),k.method("start",function(){for(var t=0;t<u.length;t++)u[t].g&&u[t].g.remove(),A(u[t]);z();var e=function(t){g.right=t,h.to-h.from<g.zoom_in&&(h.to=h.from+g.zoom_in>g.zoom_in?g.right:h.from+g.zoom_in),j();for(var e=0;e<u.length;e++)w(u[e],h)};"function"==typeof g.right?g.right(e):e(g.right)}),k.method("update",function(){for(var t=0;t<u.length;t++)w(u[t])});var w=function(t,e){if(t.data()){var n=t.data(),r=n.update();r.call(n,{loc:e,on_success:function(){t.display().update.call(t,s)}})}},j=function(){s=d3.scale.linear().domain([h.from,h.to]).range([0,d]),y&&i.call(v.x(s).scaleExtent([(h.to-h.from)/(g.zoom_out-1),(h.to-h.from)/g.zoom_in]).on("zoom",P))};k.method("move_right",function(t){t>0&&T(t,1)}),k.method("move_left",function(t){t>0&&T(t,-1)}),k.method("zoom",function(t){T(t,0)}),k.method("find_track_by_id",function(t){for(var e=0;e<u.length;e++)if(u[e].id()===t)return u[e]}),k.method("reorder",function(t){for(var e=0;e<t.length;e++){for(var n=!1,r=0;r<u.length;r++)if(u[r].id()===t[e].id()){n=!0,u.splice(r,1);break}n||(A(t[e]),w(t[e],{from:h.from,to:h.to}))}for(var o=0;o<u.length;o++)u[o].g.remove();u=t,z()}),k.method("remove_track",function(t){t.g.remove()}),k.method("add_track",function(t){if(t instanceof Array){for(var e=0;e<t.length;e++)b.add_track(t[e]);return b}return u.push(t),b}),k.method("tracks",function(t){return arguments.length?(u=t,b):u}),k.method("width",function(t){if(!arguments.length)return d;if(c>t&&(t=c),void 0!==n){d3.select("#tnt_"+n).select("svg").attr("width",t),d3.select("#tnt_"+n).style("width",parseInt(t)+2*_+"px"),d3.select("#tnt_"+n+"_pane").attr("width",t),d=t,j();for(var e=0;e<u.length;e++)u[e].g.select("rect").attr("width",t),u[e].display().reset.call(u[e]),u[e].display().update.call(u[e],s)}else d=t;return b}),k.method("allow_drag",function(t){return arguments.length?(y=t,y?void 0!==s&&i.call(v.x(s).scaleExtent([(h.to-h.from)/(g.zoom_out-1),(h.to-h.from)/g.zoom_in]).on("zoom",P)):v.x(d3.scale.linear()).on("zoom",null),b):y});var z=function(){for(var r=0,o=0;o<u.length;o++){var i=u[o];i.g.attr("transform")?i.g.transition().duration(m).attr("transform","translate("+x.extend_canvas.left+","+r+")"):i.g.attr("transform","translate("+x.extend_canvas.left+","+r+")"),r+=i.height()}return e.attr("height",r+f),d3.select("#tnt_"+n).style("height",r+10+f+"px"),d3.select("#tnt_"+n+"_5pcap").attr("height",r).each(function(e){t(this)}),d3.select("#tnt_"+n+"_3pcap").attr("height",r).each(function(e){t(this)}),a.attr("height",r+f),b},A=function(t){return t.g=e.select("g").select("g").append("g").attr("class","tnt_track").attr("height",t.height()),t.g.append("rect").attr("x",0).attr("y",0).attr("width",b.width()).attr("height",t.height()).style("fill",t.background_color()).style("pointer-events","none"),t.display()&&t.display().init.call(t,d),b},T=function(t,e){var n,r=s.domain(),o=r[1]-r[0],a=o*t-o;switch(e){case-1:n=[~~r[0]-a,~~(r[1]-a)];break;case 1:n=[~~r[0]+a,~~(r[1]-a)];break;case 0:n=[r[0]-~~(a/2),r[1]+~~a/2]}var i=d3.interpolateNumber(r[0],n[0]),u=x.ease,c=0;d3.timer(function(){var t,n=i(u(c));switch(e){case-1:t=n+o;break;case 1:t=n+o;break;case 0:t=r[1]+r[0]-n}var a=[n,t];return s.domain(a),P(s),c+=.02,c>1})},q=function(){var t=s.domain();b.from(~~t[0]),b.to(~~t[1]);for(var e=0;e<u.length;e++){var n=u[e];w(n,h)}},E=o(q,300),P=function(t){void 0!==t&&y&&v.x(t);var e=s.domain();e[0]<=5&&d3.select("#tnt_"+n+"_5pcap").attr("width",_).transition().duration(200).attr("width",0),e[1]>=g.right-5&&d3.select("#tnt_"+n+"_3pcap").attr("width",_).transition().duration(200).attr("width",0),e[0]<g.left?v.translate([v.translate()[0]-s(g.left)+s.range()[0],v.translate()[1]]):e[1]>g.right&&v.translate([v.translate()[0]-s(g.right)+s.range()[1],v.translate()[1]]),E();for(var r=0;r<u.length;r++){var o=u[r];o.display().move.call(o,s)}};return b};e.exports=n=a},{"tnt.api":10,"tnt.utils":12}],17:[function(t,e,n){var r=t("tnt.api"),o=function(){"use strict";var t=function(){};return r(t).getset("label","").getset("elements",[]).getset("update",function(){}),t};o.retriever={},o.retriever.sync=function(){var t=function(e){this.elements(t.retriever()(e.loc)),e.on_success()};return r(t).getset("retriever",function(){}),t},o.retriever.async=function(){var t="",e=this,n=function(n){d3.json(t,function(t,r){e.elements(r),n.on_success()})};return r(n).getset("url",""),n},o.empty=function(){var t=o(),e=o.retriever.sync();return t.update(e),t},e.exports=n=o},{"tnt.api":10}],18:[function(t,e,n){var r=t("tnt.api"),o=t("./layout.js"),a=function(){var t=d3.dispatch("click","dblclick","mouseover","mouseout"),e={create:function(){throw"create_elem is not defined in the base feature object"},mover:function(){throw"move_elem is not defined in the base feature object"},updater:function(){},guider:function(){},index:void 0,layout:o.identity(),foreground_color:"#000"},n={},a=function(){var t=this;t.g.selectAll(".tnt_elem").remove(),t.g.selectAll(".tnt_guider").remove()},i=function(t){var n=this;n.g.append("text").attr("x",5).attr("y",12).attr("font-size",11).attr("fill","grey").text(n.label()),e.guider.call(n,t)},s=function(n,r,o){n.on("click",t.click),n.on("mouseover",t.mouseover),n.on("dblclick",t.dblclick),n.on("mouseout",t.mouseout),e.create.call(r,n,o)},u=function(t,r){var o=this,a=o.g,i=o.data().elements();void 0!==r&&(i=i[r]);var s,u,c=e.layout.call(o,i,t);s=a.selectAll(void 0!==r?".tnt_elem_"+r:".tnt_elem"),u=e.index?s.data(c,function(t){return void 0!==t?e.index(t):void 0}):s.data(c),e.updater.call(o,u,t);var l=u.enter();l.append("g").attr("class","tnt_elem").classed("tnt_elem_"+r,r).call(n.plot,o,t),u.exit().remove()},c=function(t,n){var r,o=this,a=o.g;r=a.selectAll(void 0!==n?".tnt_elem_"+n:".tnt_elem"),e.mover.call(this,r,t)},l=function(t){t.parentNode.appendChild(t)},d=function(t){if(void 0!==t){var e=this,n=e.g;n.selectAll(".tnt_elem_"+t).each(function(){l(this)})}};return r(n).getset(e).method({reset:a,plot:s,update:u,move:c,init:i,move_to_front:d}),d3.rebind(n,t,"on")};a.composite=function(){var t={},e=[],n={},o=function(){for(var e=this,n=0;n<t.length;n++)t[n].reset.call(e)},a=function(e){var n=this;for(var r in t)t.hasOwnProperty(r)&&t[r].init.call(n,e)},i=function(n){for(var r=this,o=0;o<e.length;o++)t[e[o]].update.call(r,n,e[o]),t[e[o]].move_to_front.call(r,e[o])},s=function(e){var n=this;for(var r in t)t.hasOwnProperty(r)&&t[r].move.call(n,e,r)},u=function(r,o){return t[r]=o,e.push(r),n},c=function(){for(var n=[],r=0;r<e.length;r++)n.push(t[e[r]]);return n};return r(n).method({reset:o,update:i,move:s,init:a,add:u,displays:c}),n},a.area=function(){var t,e=a.line(),n=a.line(),r=d3.svg.area().interpolate(n.interpolate()).tension(e.tension()),o=e.create();e.create(function(a,i){var s=this;void 0!==t&&s.g.select("path").remove(),o.call(s,a,i),r.x(n.x()).y1(n.y()).y0(s.height()),t=a.data(),a.remove(),s.g.append("path").attr("class","tnt_area").classed("tnt_elem",!0).datum(t).attr("d",r).attr("fill",d3.rgb(e.foreground_color()).brighter())});var i=e.mover();return e.mover(function(e,o){var a=this;i.call(a,e,o),r.x(n.x()),a.g.select(".tnt_area").datum(t).attr("d",r)}),e},a.line=function(){var t=a(),e=function(t){return t.pos},n=function(t){return t.val},r=.7,o=d3.scale.linear(),i=d3.svg.line().interpolate("basis");t.line=function(){return i},t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(e){return arguments.length?(n=e,t):n},t.tension=function(e){return arguments.length?(r=e,t):r};var s;return t.create(function(a,u){var c=this;void 0!==s&&c.g.select("path").remove(),i.tension(r).x(function(t){return u(e(t))}).y(function(t){return c.height()-o(n(t))}),s=a.data(),a.remove(),o.domain([0,1]).range([0,c.height()-2]),c.g.append("path").attr("class","tnt_elem").attr("d",i(s)).style("stroke",t.foreground_color()).style("stroke-width",4).style("fill","none")}),t.mover(function(t,n){var r=this;i.x(function(t){return n(e(t))}),r.g.select("path").attr("d",i(s))}),t},a.conservation=function(){var t=a.area(),e=t.create();return t.create(function(t,n){var r=this;e.call(r,d3.select(t[0][0]),n)}),t},a.ensembl=function(){var t=a(),e="#7FFF00",n="#00BB00";return t.guider(function(e){var n=this,r=~~(n.height()-.8*n.height())/2;n.g.append("line").attr("class","tnt_guider").attr("x1",0).attr("x2",e).attr("y1",r).attr("y2",r).style("stroke",t.foreground_color()).style("stroke-width",1),n.g.append("line").attr("class","tnt_guider").attr("x1",0).attr("x2",e).attr("y1",n.height()-r).attr("y2",n.height()-r).style("stroke",t.foreground_color()).style("stroke-width",1)}),t.create(function(e,n){var r=this,o=~~(r.height()-.8*r.height())/2;e.append("rect").attr("x",function(t){return n(t.start)}).attr("y",o).attr("width",function(t){return n(t.end)-n(t.start)}).attr("height",r.height()-~~(2*o)).attr("fill",r.background_color()).transition().duration(500).attr("fill",function(e){return d3.rgb("high"===e.type?t.foreground_color():"low"===e.type?t.foreground_color2():t.foreground_color3())})}),t.updater(function(t,e){t.select("rect").attr("width",function(t){return e(t.end)-e(t.start)})}),t.mover(function(t,e){t.select("rect").attr("x",function(t){return e(t.start)}).attr("width",function(t){return e(t.end)-e(t.start)})}),t.foreground_color2=function(n){return arguments.length?(e=n,t):e},t.foreground_color3=function(e){return arguments.length?(n=e,t):n},t},a.vline=function(){var t=a();return t.create(function(e,n){var r=this;e.append("line").attr("x1",function(e){return n(t.index()(e))}).attr("x2",function(e){return n(t.index()(e))}).attr("y1",0).attr("y2",r.height()).attr("stroke",t.foreground_color()).attr("stroke-width",1)}),t.mover(function(e,n){e.select("line").attr("x1",function(e){return n(t.index()(e))}).attr("x2",function(e){return n(t.index()(e))})}),t},a.pin=function(){var t=a(),e=d3.scale.linear().domain([0,0]).range([0,0]),n={pos:d3.functor("pos"),val:d3.functor("val"),domain:[0,0]},o=5;return r(t).getset(n),t.create(function(r,a){var i=this;e.domain(t.domain()).range([o,i.height()-o-10]),r.append("line").attr("x1",function(t,e){return a(t[n.pos(t,e)])}).attr("y1",function(t){return i.height()}).attr("x2",function(t,e){return a(t[n.pos(t,e)])}).attr("y2",function(t,r){return i.height()-e(t[n.val(t,r)])}).attr("stroke",t.foreground_color()),r.append("circle").attr("cx",function(t,e){return a(t[n.pos(t,e)])}).attr("cy",function(t,r){return i.height()-e(t[n.val(t,r)])}).attr("r",o).attr("fill",t.foreground_color()),r.append("text").attr("font-size","13").attr("x",function(t,e){return a(t[n.pos(t,e)])}).attr("y",function(t,e){return 10}).style("text-anchor","middle").text(function(t){return t.label||""})}),t.updater(function(t,e){t.select("text").text(function(t){return t.label||""})}),t.mover(function(t,r){var o=this;t.select("line").attr("x1",function(t,e){return r(t[n.pos(t,e)])}).attr("y1",function(t){return o.height()}).attr("x2",function(t,e){return r(t[n.pos(t,e)])}).attr("y2",function(t,r){return o.height()-e(t[n.val(t,r)])}),t.select("circle").attr("cx",function(t,e){return r(t[n.pos(t,e)])}).attr("cy",function(t,r){return o.height()-e(t[n.val(t,r)])}),t.select("text").attr("x",function(t,e){return r(t[n.pos(t,e)])}).text(function(t){return t.label||""})}),t.guider(function(t){var e=this;e.g.append("line").attr("x1",0).attr("x2",t).attr("y1",e.height()).attr("y2",e.height()).style("stroke","black").style("stroke-with","1px")}),t},a.block=function(){var t=a();return r(t).getset("from",function(t){return t.start}).getset("to",function(t){return t.end}),t.create(function(e,n){var r=this;e.append("rect").attr("x",function(e,r){return n(t.from()(e,r))}).attr("y",0).attr("width",function(e,r){return n(t.to()(e,r))-n(t.from()(e,r))}).attr("height",r.height()).attr("fill",r.background_color()).transition().duration(500).attr("fill",function(e){return void 0===e.color?t.foreground_color():e.color})}),t.updater(function(t,e){t.select("rect").attr("width",function(t){return e(t.end)-e(t.start)})}),t.mover(function(t,e){t.select("rect").attr("x",function(t){return e(t.start)}).attr("width",function(t){return e(t.end)-e(t.start)})}),t},a.axis=function(){var t,e="top",n={};return n.reset=function(){t=void 0;var e=this;e.g.selectAll("rect").remove(),e.g.selectAll(".tick").remove()},n.plot=function(){},n.move=function(){var e=this,n=e.g;n.call(t)},n.init=function(){},n.update=function(n){void 0===t&&(t=d3.svg.axis().scale(n).orient(e));var r=this,o=r.g;o.call(t)},n.orientation=function(t){return arguments.length?(e=t,n):e},n},a.location=function(){var t,e={};return e.reset=function(){},e.plot=function(){},e.init=function(){},e.move=function(e){var n=e.domain();t.select("text").text("Location: "+~~n[0]+"-"+~~n[1])},e.update=function(e){var n=this,r=n.g,o=e.domain();void 0===t&&(t=r,t.append("text").text("Location: "+~~o[0]+"-"+~~o[1]))},e},e.exports=n=a},{"./layout.js":20,"tnt.api":10}],19:[function(t,e,n){var r=t("./board.js");r.track=t("./track"),r.track.data=t("./data.js"),r.track.layout=t("./layout.js"),r.track.feature=t("./feature.js"),r.track.layout=t("./layout.js"),e.exports=n=r},{"./board.js":16,"./data.js":17,"./feature.js":18,"./layout.js":20,"./track":21}],20:[function(t,e,n){var r=t("tnt.api"),o=function(){{var t=function(e,n){var r=this;return t.elements().call(r,e,n),e};r(t).getset("elements",function(){}).method({height:function(){}})}return t};o.identity=function(){return o().elements(function(t){return t})},e.exports=n=o},{"tnt.api":10}],21:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.utils").iterator,a=function(){"use strict";{var t,e={id:a.id()},n={background_color:d3.rgb("#CCCCCC"),height:250,data:a.data.empty(),label:""},o=function(){};r(o).getset(n).get(e)}return o.display=function(e){if(!arguments.length)return t;if(t=e,"function"==typeof t)t.layout&&t.layout().height(n.height);else for(var r in t)t.hasOwnProperty(r)&&t[r].layout&&t[r].layout().height(n.height);return o},o};a.id=o(1),e.exports=n=a},{"tnt.api":10,"tnt.utils":12}],22:[function(t,e,n){e.exports=tnt_ensembl=t("./src/rest.js")},{"./src/rest.js":39}],23:[function(t,e,n){(function(n,r){(function(){"use strict";function o(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){D=t}function u(t){K=t}function c(){var t=n.nextTick,e=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(e)&&"0"===e[1]&&"10"===e[2]&&(t=setImmediate),function(){t(p)}}function l(){return function(){X(p)}}function d(){var t=0,e=new Q(p),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function f(){var t=new MessageChannel;return t.port1.onmessage=p,function(){t.port2.postMessage(0)}}function h(){return function(){setTimeout(p,1)}}function p(){for(var t=0;J>t;t+=2){var e=et[t],n=et[t+1];e(n),et[t]=void 0,et[t+1]=void 0}J=0}function v(){try{var e=t,n=e("vertx");return X=n.runOnLoop||n.runOnContext,l()}catch(r){return h()}}function g(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function y(t){try{return t.then}catch(e){return at.error=e,at}}function x(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function b(t,e,n){K(function(t){var r=!1,o=x(n,e,function(n){r||(r=!0,e!==n?j(t,n):A(t,n))},function(e){r||(r=!0,T(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,T(t,o))},t)}function k(t,e){e._state===rt?A(t,e._result):e._state===ot?T(t,e._result):q(e,void 0,function(e){j(t,e)},function(e){T(t,e)})}function w(t,e){if(e.constructor===t.constructor)k(t,e);else{var n=y(e);n===at?T(t,at.error):void 0===n?A(t,e):a(n)?b(t,e,n):A(t,e)}}function j(t,e){t===e?T(t,_()):o(e)?w(t,e):A(t,e)}function z(t){t._onerror&&t._onerror(t._result),E(t)}function A(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&K(E,t))}function T(t,e){t._state===nt&&(t._state=ot,t._result=e,K(z,t))}function q(t,e,n,r){var o=t._subscribers,a=o.length;t._onerror=null,o[a]=e,o[a+rt]=n,o[a+ot]=r,0===a&&t._state&&K(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,a=t._result,i=0;i<e.length;i+=3)r=e[i],o=e[i+n],r?R(n,r,o,a):o(a);t._subscribers.length=0}}function P(){this.error=null}function O(t,e){try{return t(e)}catch(n){return it.error=n,it}}function R(t,e,n,r){var o,i,s,u,c=a(n);if(c){if(o=O(n,r),o===it?(u=!0,i=o.error,o=null):s=!0,e===o)return void T(e,m())}else o=r,s=!0;e._state!==nt||(c&&s?j(e,o):u?T(e,i):t===rt?A(e,o):t===ot&&T(e,o))}function M(t,e){try{e(function(e){j(t,e)},function(e){T(t,e)})}catch(n){T(t,n)}}function C(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(g),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?A(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&A(n.promise,n._result))):T(n.promise,n._validationError())}function N(t){return new st(this,t).promise}function I(t){function e(t){j(o,t)}function n(t){T(o,t)}var r=this,o=new r(g);if(!G(t))return T(o,new TypeError("You must pass an array to race.")),o;for(var a=t.length,i=0;o._state===nt&&a>i;i++)q(r.resolve(t[i]),void 0,e,n);return o}function L(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(g);return j(n,t),n}function S(t){var e=this,n=new e(g);return T(n,t),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function $(t){this._id=ft++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==t&&(a(t)||U(),this instanceof $||F(),M(this,t))}function H(){var t;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=ht)}var B;B=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var X,D,Y,G=B,J=0,K=({}.toString,function(t,e){et[J]=t,et[J+1]=e,J+=2,2===J&&(D?D(p):Y())}),V="undefined"!=typeof window?window:void 0,W=V||{},Q=W.MutationObserver||W.WebKitMutationObserver,Z="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),tt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,et=new Array(1e3);Y=Z?c():Q?d():tt?f():void 0===V&&"function"==typeof t?v():h();var nt=void 0,rt=1,ot=2,at=new P,it=new P;C.prototype._validateInput=function(t){return G(t)},C.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},C.prototype._init=function(){this._result=new Array(this.length)};var st=C;C.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,o=0;n._state===nt&&e>o;o++)t._eachEntry(r[o],o)},C.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;i(t)?t.constructor===r&&t._state!==nt?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},C.prototype._settledAt=function(t,e,n){var r=this,o=r.promise;o._state===nt&&(r._remaining--,t===ot?T(o,n):r._result[e]=n),0===r._remaining&&A(o,r._result)},C.prototype._willSettleAt=function(t,e){var n=this;q(t,void 0,function(t){n._settledAt(rt,e,t)},function(t){n._settledAt(ot,e,t)})};var ut=N,ct=I,lt=L,dt=S,ft=0,ht=$;$.all=ut,$.race=ct,$.resolve=lt,$.reject=dt,$._setScheduler=s,$._setAsap=u,$._asap=K,$.prototype={constructor:$,then:function(t,e){var n=this,r=n._state;if(r===rt&&!t||r===ot&&!e)return this;var o=new this.constructor(g),a=n._result;if(r){var i=arguments[r-1];K(function(){R(r,o,i,a)})}else q(n,o,t,e);return o},"catch":function(t){return this.then(null,t)}};var pt=H,vt={Promise:ht,polyfill:pt};"function"==typeof define&&define.amd?define(function(){return vt}):"undefined"!=typeof e&&e.exports?e.exports=vt:"undefined"!=typeof this&&(this.ES6Promise=vt),pt()}).call(this)}).call(this,t("IrXUsu"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{IrXUsu:6}],24:[function(t,e,n){"use strict";!function(t,r){"function"==typeof define&&define.amd?define(function(){return t.httppleasepromises=r(t)}):"object"==typeof n?e.exports=r(t):t.httppleasepromises=r(t)}(this,function(t){return function(e){if(e=e||t&&t.Promise,!e)throw new Error("No Promise implementation found.");return{processRequest:function(t){var n,r,o=t.onload,a=t.onerror,i=new e(function(t,e){n=t,r=e});t.onload=function(t){var e;return o&&(e=o.apply(this,arguments)),n(t),e},t.onerror=function(t){var e;return a&&(e=a.apply(this,arguments)),r(t),e},t.then=function(){return i.then.apply(i,arguments);

},t["catch"]=function(){return i["catch"].apply(i,arguments)}}}}})},{}],25:[function(t,e,n){"use strict";function r(t,e){var n=new Error(t);n.name="RequestError",this.name=n.name,this.message=n.message,n.stack&&(this.stack=n.stack),this.toString=function(){return this.message};for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}var o=t("./response");r.prototype=Error.prototype,r.create=function(t,e,n){var a=new r(t,n);return o.call(a,e),a},e.exports=r},{"./response":28}],26:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var a,h,p,v,g;for(n=new l(d(t,n)),o=0;o<e.length;o++)h=e[o],h.processRequest&&h.processRequest(n);for(o=0;o<e.length;o++)if(h=e[o],h.createXHR){a=h.createXHR(n);break}a=a||new i,n.xhr=a,p=f(s(function(t){clearTimeout(g),a.onload=a.onerror=a.onreadystatechange=a.ontimeout=a.onprogress=null;var i=t&&t.isHttpError?t:new c(n);for(o=0;o<e.length;o++)h=e[o],h.processResponse&&h.processResponse(i);t?n.onerror&&n.onerror(t):n.onload&&n.onload(i),r&&r(t,i)})),a.onreadystatechange=function(){if(!n.timedOut)if(n.aborted)p(u("Request aborted",n,{name:"Abort"}));else if(4===a.readyState){var t=Math.floor(a.status/100);if(2===t)p();else if(404!==a.status||n.errorOn404){var e;switch(t){case 4:e="Client";break;case 5:e="Server";break;default:e="HTTP"}var r=e+" Error: The server returned a status of "+a.status+' for the request "'+n.method.toUpperCase()+" "+n.url+'"';p(u(r,n))}else p()}},a.onload=function(){p()},a.onerror=function(){p(u("Internal XHR Error",n))},a.ontimeout=function(){},a.onprogress=function(){},a.open(n.method,n.url),n.timeout&&(g=setTimeout(function(){n.timedOut=!0,p(u("Request timeout",n,{name:"Timeout"}));try{a.abort()}catch(t){}},n.timeout));for(v in n.headers)n.headers.hasOwnProperty(v)&&a.setRequestHeader(v,n.headers[v]);return a.send(n.body),n}t=t||{},e=e||[];var a,h=["get","post","put","head","patch","delete"],p=function(t){return function(e,r){return e=new l(e),e.method=t,n(e,r)}};for(o=0;o<h.length;o++)a=h[o],n[a]=p(a);return n.plugins=function(){return e},n.defaults=function(n){return n?r(d(t,n),e):t},n.use=function(){var n=Array.prototype.slice.call(arguments,0);return r(t,e.concat(n))},n.bare=function(){return r()},n.Request=l,n.Response=c,n}var o,a=t("../plugins/cleanurl"),i=t("./xhr"),s=t("./utils/delay"),u=t("./error").create,c=t("./response"),l=t("./request"),d=t("xtend"),f=t("./utils/once");e.exports=r({},[a])},{"../plugins/cleanurl":33,"./error":25,"./request":27,"./response":28,"./utils/delay":29,"./utils/once":30,"./xhr":31,xtend:32}],27:[function(t,e,n){"use strict";function r(t){var e="string"==typeof t?{url:t}:t||{};this.method=e.method?e.method.toUpperCase():"GET",this.url=e.url,this.headers=e.headers||{},this.body=e.body,this.timeout=e.timeout||0,this.errorOn404=null!=e.errorOn404?e.errorOn404:!0,this.onload=e.onload,this.onerror=e.onerror}r.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this)},r.prototype.header=function(t,e){var n;for(n in this.headers)if(this.headers.hasOwnProperty(n)&&t.toLowerCase()===n.toLowerCase()){if(1===arguments.length)return this.headers[n];delete this.headers[n];break}return null!=e?(this.headers[t]=e,e):void 0},e.exports=r},{}],28:[function(t,e,n){"use strict";function r(t){var e,n,r,o=t.xhr;if(this.request=t,this.xhr=o,this.headers={},!t.aborted&&!t.timedOut){if(this.status=o.status||0,this.text=o.responseText,this.body=o.response||o.responseText,this.contentType=o.contentType||o.getResponseHeader&&o.getResponseHeader("Content-Type"),o.getAllResponseHeaders)for(n=o.getAllResponseHeaders().split("\n"),e=0;e<n.length;e++)(r=n[e].match(/\s*([^\s]+):\s+([^\s]+)/))&&(this.headers[r[1]]=r[2]);this.isHttpError=this.status>=400}}var o=t("./request");r.prototype.header=o.prototype.header,e.exports=r},{"./request":27}],29:[function(t,e,n){"use strict";e.exports=function(t){return function(){var e=Array.prototype.slice.call(arguments,0),n=function(){return t.apply(null,e)};setTimeout(n,0)}}},{}],30:[function(t,e,n){"use strict";e.exports=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments)),e}}},{}],31:[function(t,e,n){e.exports=window.XMLHttpRequest},{}],32:[function(t,e,n){function r(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}e.exports=r},{}],33:[function(t,e,n){"use strict";e.exports={processRequest:function(t){t.url=t.url.replace(/[^%]+/g,function(t){return encodeURI(t)})}}},{}],34:[function(t,e,n){"use strict";var r=t("./jsonrequest"),o=t("./jsonresponse");e.exports={processRequest:function(t){r.processRequest.call(this,t),o.processRequest.call(this,t)},processResponse:function(t){o.processResponse.call(this,t)}}},{"./jsonrequest":35,"./jsonresponse":36}],35:[function(t,e,n){"use strict";e.exports={processRequest:function(t){var e=t.header("Content-Type"),n=e&&-1!==e.indexOf("application/json");(null==e||n)&&t.body&&(e||t.header("Content-Type","application/json"),t.body=JSON.stringify(t.body))}}},{}],36:[function(t,e,n){"use strict";e.exports={processRequest:function(t){var e=t.header("Accept");null==e&&t.header("Accept","application/json")},processResponse:function(t){if(t.contentType&&/^.*\/(?:.*\+)?json(;|$)/i.test(t.contentType)){var e="string"==typeof t.body?t.body:t.text;e&&(t.body=JSON.parse(e))}}}},{}],37:[function(t,e,n){e.exports=t(7)},{"./src/api.js":38}],38:[function(t,e,n){e.exports=t(8)},{}],39:[function(t,e,n){var r=t("httpplease"),o=t("tnt.api"),a=t("httpplease-promises"),i=t("es6-promise").Promise,s=t("httpplease/plugins/json");r=r.use(s).use(a(i)),tnt_eRest=function(){var t={proxyUrl:"https://rest.ensembl.org"},e=0,n=function(){};n.limits={region:5e6};var a=o(n);a.getset(t),a.method("call",function(t,e){return e?r.post({url:t,body:e}):r.get({url:t})}),n.url={};var i=o(n.url);return i.method("region",function(e){var n="/overlap/region/",r=e.features||["gene"],o=r.map(function(t){return"feature="+t}),a=o.join("&");return t.proxyUrl+n+e.species+"/"+e.chr+":"+e.from+"-"+e.to+".json?"+a}),i.method("xref",function(e){var n="/xrefs/symbol/";return t.proxyUrl+n+e.species+"/"+e.name+".json?object_type=gene"}),i.method("homologues",function(e){var n="/homology/id/";return t.proxyUrl+n+e.id+".json?format=condensed;sequence=none;type=all"}),i.method("gene",function(e){var n="/lookup/id/",r=t.proxyUrl+n+e.id+".json?format=full";return e.expand&&1===e.expand&&(r+="&expand=1"),r}),i.method("chr_info",function(e){var n="/info/assembly/";return t.proxyUrl+n+e.species+"/"+e.chr+".json?format=full"}),i.method("aln_block",function(e){for(var n="/alignment/region/",r=t.proxyUrl+n+e.species+"/"+e.chr+":"+e.from+"-"+e.to+".json?method="+e.method,o=0;o<e.species_set.length;o++)r+="&species_set="+e.species_set[o];return r}),i.method("sequence",function(e){var n="/sequence/region/";return t.proxyUrl+n+e.species+"/"+e.chr+":"+e.from+".."+e.to+"?content-type=application/json"}),i.method("variation",function(e){var n="/variation/";return t.proxyUrl+n+e.species}),i.method("gene_tree",function(e){var n="/genetree/id/";return t.proxyUrl+n+e.id+".json?sequence="+(e.sequence||e.aligned?1:"none")+(e.aligned?"&aligned=1":"")}),i.method("assembly",function(e){var n="/info/assembly/";return t.proxyUrl+n+e.species+".json"}),a.method("connections",function(){return e}),n},e.exports=n=tnt_eRest},{"es6-promise":23,httpplease:26,"httpplease-promises":24,"httpplease/plugins/json":34,"tnt.api":37}],40:[function(t,e,n){e.exports=t("./src/index.js")},{"./src/index.js":46}],41:[function(t,e,n){e.exports=t(7)},{"./src/api.js":42}],42:[function(t,e,n){e.exports=t(8)},{}],43:[function(t,e,n){var r=t("tnt.board"),o=t("tnt.api");r.track.data.retriever.ensembl=function(){var t=[function(){}],e=function(){return!1},n=r.track.data.genome.rest,a=function(r){var o=this,i=r.loc;if(Object.keys(a.extra()).length){var s=a.extra();for(var u in s)s.hasOwnProperty(u)&&(i[u]=s[u])}var c=r.on_success,l=n.url[a.endpoint()](i);e(i)?(o.elements([]),c()):n.call(l).then(function(e){for(var n=0;n<t.length;n++){var r=t[n](e.body);r&&(e.body=r)}o.elements(e.body),c()})};return o(a).getset("endpoint").getset("extra",{}),a.success=function(e){return arguments.length?(t.push(e),a):t},a.ignore=function(t){return arguments.length?(e=t,a):e},a};var a=function(){var t=150,e=r.track.data(),n=r.track.data.retriever.ensembl().ignore(function(e){return e.to-e.from>t}).endpoint("sequence").success(function(t){for(var e=t.id.split(":"),n=e[3],r=[],o=0;o<t.seq.length;o++)r.push({pos:+n+o,sequence:t.seq[o]});return r});return e.limit=function(e){return arguments.length?(t=e,this):t},e.update(n)},i=function(){var t=r.track.data.retriever.ensembl().endpoint("region").success(function(t){for(var e=0;e<t.length;e++)t[e].display_label=-1===t[e].strand?"<"+t[e].external_name:t[e].external_name+">"});return r.track.data().update(t)},s=function(){function t(t,e){var n={};n.exons=t,n.introns=[];for(var r=0;r<t.length-1;r++){var o={start:1===t[r].transcript.strand?t[r].end:t[r].start,end:1===t[r].transcript.strand?t[r+1].start:t[r+1].end,transcript:e};n.introns.push(o)}return n}function e(t){var e,n;void 0!==t.Translation&&(e=t.Translation.start,n=t.Translation.end);for(var r=t.rawExons,o=[],a=0;a<r.length;a++)if(void 0===t.Translation)o.push({start:r[a].start,end:r[a].end,transcript:t,coding:!1,offset:r[a].start-t.start});else if(r[a].start<e)if(r[a].end<e)o.push({start:r[a].start,end:r[a].end,transcript:t,coding:!1,offset:r[a].start-t.start});else{var i={start:r[a].start,end:e,transcript:t,coding:!1,offset:r[a].start-t.start},s={start:e,end:r[a].end,transcript:t,coding:!0,offset:r[a].start-t.start};1===r[a].strand?(o.push(i),o.push(s)):(o.push(s),o.push(i))}else if(r[a].end>n)if(r[a].start>n)o.push({start:r[a].start,end:r[a].end,transcript:t,coding:!1,offset:r[a].start-t.start});else{var u={start:r[a].start,end:n,transcript:t,coding:!0,offset:r[a].start-t.start},c={start:n,end:r[a].end,transcript:t,coding:!1,offset:r[a].start-t.start};1===r[a].strand?(o.push(u),o.push(c)):(o.push(c),o.push(u))}else o.push({start:r[a].start,end:r[a].end,transcript:t,coding:!0,offset:r[a].start-t.start});return o}var n=r.track.data.retriever.ensembl().endpoint("region").extra({features:["gene","transcript","exon","cds"]}).success(function(n){for(var r={},o={},a=0;a<n.length;a++){var i=n[a];switch(i.feature_type){case"gene":o[i.id]=i;break;case"transcript":var s={id:i.id,label:i.external_name,name:-1===i.strand?"<"+i.external_name:i.external_name+">",start:i.start,end:i.end,strand:i.strand,gene:o[i.Parent],transcript:i,rawExons:[]};r[i.id]=s;break;case"exon":var u={transcript:i.Parent,start:i.start,end:i.end};r[i.Parent].rawExons.push(u);break;case"cds":void 0===r[i.Parent].Translation&&(r[i.Parent].Translation={});var c=r[i.Parent].Translation.start;(void 0===c||c>i.start)&&(r[i.Parent].Translation.start=i.start);var l=r[i.Parent].Translation.end;(void 0===l||l<i.end)&&(r[i.Parent].Translation.end=i.end)}}var d=[];for(var f in r)if(r.hasOwnProperty(f)){var h=r[f],p=t(e(h),h);p.name=[{pos:h.start,name:h.name,strand:h.strand,transcript:h}],p.key=h.id+"_"+p.exons.length,p.id=h.id,p.gene=h.gene,p.transcript=h.transcript,p.external_name=h.label,p.display_label=h.name,p.start=h.start,p.end=h.end,d.push(p)}return d});return r.track.data().update(n)},u={gene:i,sequence:a,transcript:s};e.exports=n=u},{"tnt.api":41,"tnt.board":9}],44:[function(t,e,n){var r=t("tnt.api"),o=(t("./layout.js"),t("tnt.board")),a=function(){var t=o.track.feature().layout(o.track.layout.feature()).index(function(t){return t.key});return t.create(function(e,n){var r=this,o=e.append("g").attr("transform",function(e){return"translate("+n(e.start)+","+t.layout().gene_slot().slot_height*e.slot+")"});o.append("line").attr("x1",0).attr("y1",~~(t.layout().gene_slot().gene_height/2)).attr("x2",function(t){return n(t.end)-n(t.start)}).attr("y2",~~(t.layout().gene_slot().gene_height/2)).attr("fill","none").attr("stroke",r.background_color()).attr("stroke-width",2).transition().duration(500).attr("stroke",t.foreground_color()),e.each(function(t){if(t.exons)for(var e=0;e<t.exons.length;e++)t.exons[e].slot=t.slot});var a=o.selectAll(".exons").data(function(t){return t.exons||[]},function(t){return t.start});a.enter().append("rect").attr("class","tnt_exons").attr("x",function(t){return n(t.start+t.offset)-n(t.start)}).attr("y",0).attr("width",function(t){return n(t.end)-n(t.start)}).attr("height",t.layout().gene_slot().gene_height).attr("fill",r.background_color()).attr("stroke",r.background_color()).transition().duration(500).attr("stroke",t.foreground_color()).attr("fill",function(e){return e.coding?t.foreground_color()(e):e.coding===!1?"pink":t.foreground_color()(e)}),o.append("text").attr("class","tnt_name").attr("x",0).attr("y",25).attr("fill",r.background_color()).text(function(e){return t.layout().gene_slot().show_label?e.display_label:""}).style("font-weight","normal").transition().duration(500).attr("fill",t.foreground_color())}),t.updater(function(e,n){var r=e.select("g").transition().duration(200).attr("transform",function(e){return"translate("+n(e.start)+","+t.layout().gene_slot().slot_height*e.slot+")"});r.selectAll("rect").attr("height",t.layout().gene_slot().gene_height),r.selectAll("line").attr("x2",function(t){return n(t.end)-n(t.start)}).attr("y1",~~(t.layout().gene_slot().gene_height/2)).attr("y2",~~(t.layout().gene_slot().gene_height/2)),r.select("text").text(function(e){return t.layout().gene_slot().show_label?e.display_label:""})}),t.mover(function(e,n){var r=e.select("g").attr("transform",function(e){return"translate("+n(e.start)+","+t.layout().gene_slot().slot_height*e.slot+")"});r.selectAll("line").attr("x2",function(t){return n(t.end)-n(t.start)}).attr("y1",~~(t.layout().gene_slot().gene_height/2)).attr("y2",~~(t.layout().gene_slot().gene_height/2)),r.selectAll("rect").attr("width",function(t){return n(t.end)-n(t.start)}),r.selectAll(".tnt_exons").attr("x",function(t){return n(t.start+t.offset)-n(t.start)})}),t},i=function(){{var t={fontsize:10,sequence:function(t){return t.sequence}},e=o.track.feature().index(function(t){return t.pos});r(e).getset(t)}return e.create(function(n,r){var o=this;n.append("text").attr("fill",o.background_color()).style("font-size",t.fontsize+"px").attr("x",function(t){return r(t.pos)}).attr("y",function(t){return~~(o.height()/2)+5}).style("font-family",'"Lucida Console", Monaco, monospace').text(t.sequence).transition().duration(500).attr("fill",e.foreground_color())}),e.mover(function(t,e){t.select("text").attr("x",function(t){return e(t.pos)})}),e},s=function(){var t=o.track.feature().layout(o.track.layout.feature()).index(function(t){return t.id});return t.create(function(e,n){var r=this;e.append("rect").attr("x",function(t){return n(t.start)}).attr("y",function(e){return t.layout().gene_slot().slot_height*e.slot}).attr("width",function(t){return n(t.end)-n(t.start)}).attr("height",t.layout().gene_slot().gene_height).attr("fill",r.background_color()).transition().duration(500).attr("fill",function(e){return void 0===e.color?t.foreground_color():e.color}),e.append("text").attr("class","tnt_name").attr("x",function(t){return n(t.start)}).attr("y",function(e){return t.layout().gene_slot().slot_height*e.slot+25}).attr("fill",r.background_color()).text(function(e){return t.layout().gene_slot().show_label?e.display_label:""}).style("font-weight","normal").transition().duration(500).attr("fill",function(){return t.foreground_color()})}),t.updater(function(e){e.select("rect").transition().duration(500).attr("y",function(e){return t.layout().gene_slot().slot_height*e.slot}).attr("height",t.layout().gene_slot().gene_height),e.select("text").transition().duration(500).attr("y",function(e){return t.layout().gene_slot().slot_height*e.slot+25}).text(function(e){return t.layout().gene_slot().show_label?e.display_label:""})}),t.mover(function(t,e){t.select("rect").attr("x",function(t){return e(t.start)}).attr("width",function(t){return e(t.end)-e(t.start)}),t.select("text").attr("x",function(t){return e(t.start)})}),t},u={gene:s,sequence:i,transcript:a};e.exports=n=u},{"./layout.js":47,"tnt.api":41,"tnt.board":9}],45:[function(t,e,n){var r=t("tnt.ensembl"),o=t("tnt.api"),a=t("tnt.board");a.track.data.genome=t("./data.js"),a.track.feature.genome=t("./feature"),a.track.layout.feature=t("./layout"),tnt_board_genome=function(){"use strict";var t=/^ENS\w+\d+$/,e={gene:void 0,xref_search:function(){},ensgene_search:function(){},context:0,rest:r()};a.track.data.genome.rest=e.rest;var n={left:0,right:void 0,zoom_out:e.rest.limits.region,zoom_in:200},i=a(),s=a.track().height(20).background_color("white").data(a.track.data.empty()).display(a.track.feature.location()),u=a.track().height(0).background_color("white").data(a.track.data.empty()).display(a.track.feature.axis());i.add_track(s).add_track(u),i.species("human").chr(7).from(139424940).to(141784100),i._start=i.start;var c=function(t){if(void 0!==t){if(void 0!==t.gene)return void f(t);void 0===t.species?t.species=i.species():i.species(t.species),void 0===t.chr?t.chr=i.chr():i.chr(t.chr),void 0===t.from?t.from=i.from():i.from(t.from),void 0===t.to?t.to=i.to():i.to(t.to)}else{if(void 0!==i.gene())return void f({species:i.species(),gene:i.gene()});t={},t.species=i.species(),t.chr=i.chr(),t.from=i.from(),t.to=i.to()}i.right(function(r){i.zoom_in(n.zoom_in),i.zoom_out(n.zoom_out);var o=e.rest.url.chr_info({species:t.species,chr:t.chr});e.rest.call(o).then(function(t){r(t.body.length)})}),i._start()},l=function(t,n){var r=e.rest.url.homologues({id:t});e.rest.call(r).then(function(t){var e=t.body.data[0].homologies;if(void 0!==n){var r=p(e);n(r)}})},d=function(e){return e.match(t)?!0:!1},f=function(t){if(d(t.gene))h(t.gene);else{var n=e.rest.url.xref({species:t.species,name:t.gene});e.rest.call(n).then(function(t){var n=t.body;n=n.filter(function(t){return!t.id.indexOf("ENS")}),void 0!==n[0]?(e.xref_search(t),h(n[0].id)):i.start()})}},h=function(t){var n=e.rest.url.gene({id:t});e.rest.call(n).then(function(t){var n=t.body;e.ensgene_search(n);var r=~~((n.end-n.start)*(e.context/100));i.species(n.species).chr(n.seq_region_name).from(n.start-r).to(n.end+r),i.start({species:n.species,chr:n.seq_region_name,from:n.start-r,to:n.end+r})})},p=function(t){var e=/ortholog/,n=/paralog/,r=t.filter(function(t){return t.type.match(e)}),o=t.filter(function(t){return t.type.match(n)});return{orthologues:r,paralogues:o}},v=o(i).getset(e).method("zoom_in",function(t){return arguments.length?(n.zoom_in=t,this):n.zoom_in});return v.method({start:c,homologues:l}),i},e.exports=n=tnt_board_genome},{"./data.js":43,"./feature":44,"./layout":47,"tnt.api":41,"tnt.board":9,"tnt.ensembl":22}],46:[function(t,e,n){var r=t("tnt.board");r.genome=t("./genome"),e.exports=n=r},{"./genome":45,"tnt.board":9}],47:[function(t,e,n){var r=t("tnt.api"),o=function(){{var t,e,n=[],o={expanded:{slot_height:30,gene_height:10,show_label:!0},collapsed:{slot_height:10,gene_height:7,show_label:!1}},a="expanded",i=function(r,i){var s=this;e=i;for(var c=0;c<r.length;c++)null===r[c].external_name&&(r[c].external_name="");t=~~(s.height()/o.expanded.slot_height),l(r,n);var d=u(r);return a=d>t?"collapsed":"expanded",n=r,r},s=function(){return o[a]},u=function(e){for(var n=[],r=e,o=0,a=0;a<e.length;a++)e[a].slot>o&&e[a].slot<t&&(o=e[a].slot);for(var a=0;a<r.length;a++){var i=f(n),s=r[a];if(void 0!==s.slot&&s.slot<t&&c(s,i[s.slot]))n.push(s);else for(var u=0;;){if(c(s,i[u])){s.slot=u,n.push(s),u>o&&(o=u);break}u++}}return o+1},c=function(t,n){if(void 0===n)return!0;for(var r=0;r<n.length;r++){var o=n[r];if(t.id!==o.id){var a=8*o.display_label.length+e(o.start),i=e(o.start),s=e(o.end)>a?e(o.end):a,u=8*t.display_label.length+e(t.start),c=e(t.start),l=e(t.end)>u?e(t.end):u;if(i>=c&&l>=i||c>=i&&s>=c)return!1}}return!0},l=function(t,e){for(var n=d(e),r=0;r<t.length;r++)void 0!==n[t[r].id]&&(t[r].slot=n[t[r].id])},d=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];e[r.id]=r.slot}return e},f=function(t){for(var e=[],n=0;n<t.length;n++)void 0===e[t[n].slot]&&(e[t[n].slot]=[]),e[t[n].slot].push(t[n]);return e};r(i).getset("elements",function(){}).method({gene_slot:s})}return i};e.exports=n=o},{"tnt.api":41}],48:[function(t,e,n){e.exports=t("./src/newick.js")},{"./src/newick.js":49}],49:[function(t,e,n){e.exports={parse_newick:function(t){for(var e,n=[],r={},o=t.split(/\s*(;|\(|\)|,|:)\s*/),a=0;a<o.length;a++){var i=o[a];switch(i){case"(":e={},r.children=[e],n.push(r),r=e;break;case",":e={},n[n.length-1].children.push(e),r=e;break;case")":r=n.pop();break;case":":break;default:var s=o[a-1];")"==s||"("==s||","==s?r.name=i:":"==s&&(r.branch_length=parseFloat(i))}}return r},parse_nhx:function(t){for(var e,n=[],r={},o=t.split(/\s*(;|\(|\)|\[|\]|,|:|=)\s*/),a=0;a<o.length;a++){var i=o[a];switch(i){case"(":e={},r.children=[e],n.push(r),r=e;break;case",":e={},n[n.length-1].children.push(e),r=e;break;case")":r=n.pop();break;case":":break;default:var s=o[a-1];if(")"==s||"("==s||","==s)r.name=i;else if(":"==s){isNaN(i)||(r.branch_length=parseFloat(i))}else if("="==s){var u=o[a-2];switch(u){case"D":r.duplication=i;break;case"G":r.gene_id=i;break;case"T":r.taxon_id=i;break;default:r[o[a-2]]=i}}else;}}return r}}},{}],50:[function(t,e,n){e.exports=tooltip=t("./src/tooltip.js")},{"./src/tooltip.js":53}],51:[function(t,e,n){e.exports=t(7)},{"./src/api.js":52}],52:[function(t,e,n){e.exports=t(8)},{}],53:[function(t,e,n){var r=t("tnt.api"),o=function(){"use strict";function t(e,n){if(n=n.toLowerCase(),null===e.parentNode)return void console.log("No more parents");var r=e.parentNode.tagName;return void 0!==r&&r.toLowerCase()===n?e.parentNode:t(e.parentNode,n)}var e,n=d3.behavior.drag(),o={position:"right",allow_drag:!0,show_closer:!0,fill:function(){throw"fill is not defined in the base object"},width:180,id:1},a=function(r,i){n.origin(function(){return{x:parseInt(d3.select(this).style("left")),y:parseInt(d3.select(this).style("top"))}}).on("drag",function(){o.allow_drag&&d3.select(this).style("left",d3.event.x+"px").style("top",d3.event.y+"px")});var s=t(this,"div");if(void 0!==s){e=d3.select(s).append("div").attr("class","tnt_tooltip").classed("tnt_tooltip_active",!0).call(n),d3.select("#tnt_tooltip_"+o.id).remove(),null===d3.event&&i&&(d3.event=i);var u=d3.mouse(s);d3.event=null;var c=0;return"left"===o.position&&(c=o.width),e.attr("id","tnt_tooltip_"+o.id),e.style("left",u[0]+"px").style("top",u[1]+"px"),o.show_closer&&e.append("div").attr("class","tnt_tooltip_closer").on("click",function(){a.close()}),o.fill.call(e,r),a}},i=r(a).getset(o);return i.check("position",function(t){return"left"===t||"right"===t},"Only 'left' or 'right' values are allowed for position"),i.method("close",function(){e&&e.remove()}),a};o.list=function(){var t=o();return t.fill(function(e){var n=this,r=n.append("table").attr("class","tnt_zmenu").attr("border","solid").style("width",t.width()+"px");e.header&&r.append("tr").attr("class","tnt_zmenu_header").append("th").text(e.header);var o=r.selectAll(".tnt_zmenu_row").data(e.rows).enter().append("tr").attr("class","tnt_zmenu_row");o.append("td").style("text-align","center").html(function(t,n){return e.rows[n].value}).each(function(e){void 0!==e.link&&d3.select(this).classed("link",1).on("click",function(e){e.link(e.obj),t.close.call(this)})})}),t},o.table=function(){var t=o();return t.fill(function(e){var n=this,r=n.append("table").attr("class","tnt_zmenu").attr("border","solid").style("width",t.width()+"px");e.header&&r.append("tr").attr("class","tnt_zmenu_header").append("th").attr("colspan",2).text(e.header);var o=r.selectAll(".tnt_zmenu_row").data(e.rows).enter().append("tr").attr("class","tnt_zmenu_row");o.append("th").attr("colspan",function(t,e){return""===t.value?2:1}).attr("class",function(t){return""===t.value?"tnt_zmenu_inner_header":"tnt_zmenu_cell"}).html(function(t,n){return e.rows[n].label}),o.append("td").html(function(t,n){return"function"!=typeof e.rows[n].value?e.rows[n].value:void e.rows[n].value.call(this,t)}).each(function(t){""===t.value&&d3.select(this).remove()}).each(function(e){void 0!==e.link&&d3.select(this).classed("link",1).on("click",function(e){e.link(e.obj),t.close.call(this)})})}),t},o.plain=function(){var t=o();return t.fill(function(e){var n=this,r=n.append("table").attr("class","tnt_zmenu").attr("border","solid").style("width",t.width()+"px");e.header&&r.append("tr").attr("class","tnt_zmenu_header").append("th").text(e.header),e.body&&r.append("tr").attr("class","tnt_zmenu_row").append("td").style("text-align","center").html(e.body)}),t},e.exports=n=o},{"tnt.api":51}],54:[function(t,e,n){var r=t("./src/node.js");e.exports=n=r},{"./src/node.js":61}],55:[function(t,e,n){e.exports=t(7)},{"./src/api.js":56}],56:[function(t,e,n){e.exports=t(8)},{}],57:[function(t,e,n){e.exports=t(12)},{"./src/index.js":58}],58:[function(t,e,n){e.exports=t(13)},{"./reduce.js":59,"./utils.js":60}],59:[function(t,e,n){e.exports=t(14)},{}],60:[function(t,e,n){e.exports=t(15)},{}],61:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.utils").iterator,a=function(t){"use strict";var e=function(){},n=r(e),i=function(t,e){if(e(t),void 0!==t.children)for(var n=0;n<t.children.length;n++)i(t.children[n],e)},s=function(){var e=o(1);i(t,function(t){void 0===t._id&&(t._id=e())})},u=function(t){if(void 0!==t&&void 0!==t.children)for(var e=0;e<t.children.length;e++)t.children[e]._parent=t,u(t.children[e])},c=function(t){i(t,function(t){var e;if(void 0===t._parent)t._root_dist=0;else{var e=0;t.branch_length&&(e=t.branch_length),t._root_dist=e+t._parent._root_dist}})};e.data=function(n){return arguments.length?(t=n,s(),u(t),c(t),e):t},e.data(t),n.method("find_all",function(t,n){var r=[];return e.apply(function(e){t(e)&&r.push(e)}),r}),n.method("find_node",function(n,r){if(n(e))return e;if(void 0!==t.children)for(var o=0;o<t.children.length;o++){var i=a(t.children[o]).find_node(n,r);if(i)return i}if(r&&void 0!==t._children)for(var s=0;s<t._children.length;s++){a(t._children[s]).find_node(n,r);var i=a(t._children[s]).find_node(n,r);if(i)return i}}),n.method("find_node_by_name",function(t,n){return e.find_node(function(e){return e.node_name()===t},n)}),n.method("toggle",function(){if(t)if(t.children){var n=0;e.apply(function(t){t.n_hidden()||0;n+=(t.n_hidden()||0)+1}),e.n_hidden(n-1),t._children=t.children,t.children=void 0}else e.n_hidden(0),t.children=t._children,t._children=void 0;return this}),n.method("is_collapsed",function(){return void 0!==t._children&&void 0===t.children});var l=function(t,e){if(t=t.data(),e=e.data(),void 0===t._parent)return!1;for(t=t._parent;;){if(void 0===t)return!1;if(t===e)return!0;t=t._parent}};n.method("lca",function(t){if(1===t.length)return t[0];for(var e=t[0],n=1;n<t.length;n++)e=d(e,t[n]);return e});var d=function(t,e){return t.data()===e.data()?t:l(t,e)?e:d(t,e.parent())};n.method("n_hidden",function(t){return arguments.length?(e.property("_hidden",t),e):e.property("_hidden")}),n.method("get_all_nodes",function(t){var n=[];return e.apply(function(t){n.push(t)},t),n}),n.method("get_all_leaves",function(t){var n=[];return e.apply(function(e){e.is_leaf(t)&&n.push(e)},t),n}),n.method("upstream",function(t){t(e);var n=e.parent();void 0!==n&&n.upstream(t)}),n.method("subtree",function(e,n){void 0===n&&(n=!1);for(var r={},o=0;o<e.length;o++){var i=e[o];void 0!==i&&i.upstream(function(t){var e=t.id();void 0===r[e]&&(r[e]=0),r[e]++})}var s=function(t){var e=0;if(void 0===t.children)return!1;for(var n=0;n<t.children.length;n++){var o=t.children[n]._id;r[o]>0&&e++}return 1===e},u={};return f(t,u,0,function(t){var e=t._id,o=r[e];return o>0?s(t)&&!n?!1:!0:!1}),a(u.children[0])});var f=function(t,e,n,r){if(void 0!==t)if(r(t)){var o=h(t,n);if(void 0===e.children&&(e.children=[]),e.children.push(o),void 0===t.children)return;for(var a=0;a<t.children.length;a++)f(t.children[a],o,0,r)}else{if(void 0===t.children)return;n+=t.branch_length||0;for(var a=0;a<t.children.length;a++)f(t.children[a],e,n,r)}},h=function(t,e){var n={};for(var r in t)"children"!==r&&"_children"!==r&&"_parent"!==r&&"depth"!==r&&t.hasOwnProperty(r)&&(n[r]=t[r]);return void 0!==n.branch_length&&void 0!==e&&(n.branch_length+=e),n};return n.method("present",function(t){var n=!1;return e.apply(function(e){t(e)===!0&&(n=!0)}),n}),n.method("sort",function(e){if(void 0!==t.children){for(var n=[],r=0;r<t.children.length;r++)n.push(a(t.children[r]));n.sort(e),t.children=[];for(var r=0;r<n.length;r++)t.children.push(n[r].data());for(var r=0;r<t.children.length;r++)a(t.children[r]).sort(e)}}),n.method("flatten",function(t){if(e.is_leaf())return e;var n,r=e.data(),o=h(r);t?(n=e.get_all_nodes(),n.shift()):n=e.get_all_leaves(),o.children=[];for(var i=0;i<n.length;i++)delete n[i].children,o.children.push(h(n[i].data()));return a(o)}),n.method("apply",function(n,r){if(void 0===r&&(r=!1),n(e),void 0!==t.children)for(var o=0;o<t.children.length;o++){var i=a(t.children[o]);i.apply(n,r)}if(void 0!==t._children&&r)for(var s=0;s<t._children.length;s++){var i=a(t._children[s]);i.apply(n,r)}}),n.method("property",function(n,r){return 1===arguments.length?"function"==typeof n?n(t):t[n]:("function"==typeof n&&n(t,r),t[n]=r,e)}),n.method("is_leaf",function(e){return e?void 0===t.children&&void 0===t._children:void 0===t.children}),n.method("id",function(){return e.property("_id")}),n.method("node_name",function(){return e.property("name")}),n.method("branch_length",function(){return e.property("branch_length")}),n.method("root_dist",function(){return e.property("_root_dist")}),n.method("children",function(e){var n=[];if(t.children)for(var r=0;r<t.children.length;r++)n.push(a(t.children[r]));if(t._children&&e)for(var o=0;o<t._children.length;o++)n.push(a(t._children[o]));return 0===n.length?void 0:n}),n.method("parent",function(){return void 0===t._parent?void 0:a(t._parent)}),e};e.exports=n=a},{"tnt.api":55,"tnt.utils":57}],62:[function(t,e,n){e.exports=tree=t("./src/index.js");var r=t("biojs-events");r.mixin(tree)},{"./src/index.js":72,"biojs-events":3}],63:[function(t,e,n){e.exports=t(7)},{"./src/api.js":64}],64:[function(t,e,n){e.exports=t(8)},{}],65:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{"./src/node.js":70}],66:[function(t,e,n){e.exports=t(12)},{"./src/index.js":67}],67:[function(t,e,n){e.exports=t(13)},{"./reduce.js":68,"./utils.js":69}],68:[function(t,e,n){e.exports=t(14)},{}],69:[function(t,e,n){e.exports=t(15)},{}],70:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.utils").iterator,a=function(t){"use strict";var e=function(){},n=r(e),i=function(t,e){if(e(t),void 0!==t.children)for(var n=0;n<t.children.length;n++)i(t.children[n],e)},s=function(){var e=o(1);i(t,function(t){void 0===t._id&&(t._id=e())})},u=function(t){if(void 0!==t&&void 0!==t.children)for(var e=0;e<t.children.length;e++)t.children[e]._parent=t,u(t.children[e])},c=function(t){i(t,function(t){var e;if(void 0===t._parent)t._root_dist=0;else{var e=0;t.branch_length&&(e=t.branch_length),t._root_dist=e+t._parent._root_dist}})};e.data=function(n){return arguments.length?(t=n,s(),u(t),c(t),e):t},e.data(t),n.method("find_all",function(t,n){var r=[];return e.apply(function(e){t(e)&&r.push(e)}),r}),n.method("find_node",function(n,r){if(n(e))return e;if(void 0!==t.children)for(var o=0;o<t.children.length;o++){var i=a(t.children[o]).find_node(n,r);if(i)return i}if(r&&void 0!==t._children)for(var s=0;s<t._children.length;s++){a(t._children[s]).find_node(n,r);var i=a(t._children[s]).find_node(n,r);if(i)return i}}),n.method("find_node_by_name",function(t,n){return e.find_node(function(e){return e.node_name()===t},n)}),n.method("toggle",function(){if(t)if(t.children){var n=0;e.apply(function(t){t.n_hidden()||0;n+=(t.n_hidden()||0)+1}),e.n_hidden(n-1),t._children=t.children,t.children=void 0}else e.n_hidden(0),t.children=t._children,t._children=void 0;return this}),n.method("is_collapsed",function(){return void 0!==t._children&&void 0===t.children});var l=function(t,e){if(t=t.data(),e=e.data(),void 0===t._parent)return!1;for(t=t._parent;;){if(void 0===t)return!1;

if(t===e)return!0;t=t._parent}};n.method("lca",function(t){if(1===t.length)return t[0];for(var e=t[0],n=1;n<t.length;n++)e=d(e,t[n]);return e});var d=function(t,e){return t.data()===e.data()?t:l(t,e)?e:d(t,e.parent())};n.method("n_hidden",function(t){return arguments.length?(e.property("_hidden",t),e):e.property("_hidden")}),n.method("get_all_nodes",function(t){var n=[];return e.apply(function(t){n.push(t)},t),n}),n.method("get_all_leaves",function(t){var n=[];return e.apply(function(e){e.is_leaf(t)&&n.push(e)},t),n}),n.method("upstream",function(t){t(e);var n=e.parent();void 0!==n&&n.upstream(t)}),n.method("subtree",function(e,n){void 0===n&&(n=!1);for(var r={},o=0;o<e.length;o++){var i=e[o];void 0!==i&&i.upstream(function(t){var e=t.id();void 0===r[e]&&(r[e]=0),r[e]++})}var s=function(t){var e=0;if(void 0===t.children)return!1;for(var n=0;n<t.children.length;n++){var o=t.children[n]._id;r[o]>0&&e++}return 1===e},u={};return f(t,u,0,function(t){var e=t._id,o=r[e];return o>0?s(t)&&!n?!1:!0:!1}),a(u.children[0])});var f=function(t,e,n,r){if(void 0!==t)if(r(t)){var o=h(t,n);if(void 0===e.children&&(e.children=[]),e.children.push(o),void 0===t.children)return;for(var a=0;a<t.children.length;a++)f(t.children[a],o,0,r)}else{if(void 0===t.children)return;n+=t.branch_length||0;for(var a=0;a<t.children.length;a++)f(t.children[a],e,n,r)}},h=function(t,e){var n={};for(var r in t)"children"!==r&&"_children"!==r&&"_parent"!==r&&"depth"!==r&&t.hasOwnProperty(r)&&(n[r]=t[r]);return void 0!==n.branch_length&&void 0!==e&&(n.branch_length+=e),n};return n.method("present",function(t){var n=!1;return e.apply(function(e){t(e)===!0&&(n=!0)}),n}),n.method("sort",function(e){if(void 0!==t.children){for(var n=[],r=0;r<t.children.length;r++)n.push(a(t.children[r]));n.sort(e),t.children=[];for(var r=0;r<n.length;r++)t.children.push(n[r].data());for(var r=0;r<t.children.length;r++)a(t.children[r]).sort(e)}}),n.method("flatten",function(){if(e.is_leaf())return e;var t=e.data(),n=h(t),r=e.get_all_leaves();n.children=[];for(var o=0;o<r.length;o++)n.children.push(h(r[o].data()));return a(n)}),n.method("apply",function(n,r){if(void 0===r&&(r=!1),n(e),void 0!==t.children)for(var o=0;o<t.children.length;o++){var i=a(t.children[o]);i.apply(n,r)}if(void 0!==t._children&&r)for(var s=0;s<t._children.length;s++){var i=a(t._children[s]);i.apply(n,r)}}),n.method("property",function(n,r){return 1===arguments.length?"function"==typeof n?n(t):t[n]:("function"==typeof n&&n(t,r),t[n]=r,e)}),n.method("is_leaf",function(e){return e?void 0===t.children&&void 0===t._children:void 0===t.children}),n.method("id",function(){return e.property("_id")}),n.method("node_name",function(){return e.property("name")}),n.method("branch_length",function(){return e.property("branch_length")}),n.method("root_dist",function(){return e.property("_root_dist")}),n.method("children",function(e){var n=[];if(t.children)for(var r=0;r<t.children.length;r++)n.push(a(t.children[r]));if(t._children&&e)for(var o=0;o<t._children.length;o++)n.push(a(t._children[o]));return 0===n.length?void 0:n}),n.method("parent",function(){return void 0===t._parent?void 0:a(t._parent)}),e};e.exports=n=a},{"tnt.api":63,"tnt.utils":66}],71:[function(t,e,n){var r=t("tnt.api"),o={};o.diagonal=function(){var t=function(e){var r=e.source,o=e.target,a=((r.x+o.x)/2,(r.y+o.y)/2,[r,{x:o.x,y:r.y},o]);return a=a.map(t.projection()),t.path()(a,n.call(this,a))},e=(r(t).getset("projection").getset("path"),function(t,e){var n,r=2*Math.PI,o=r/4,a=t[0]>=0?t[1]>=0?1:2:t[1]>=0?4:3,i=Math.abs(Math.asin(t[1]/e));switch(a){case 1:n=o-i;break;case 2:n=o+i;break;case 3:n=2*o+o-i;break;case 4:n=3*o+i}return n}),n=function(t){var n=t[0],r=t[1],o=(t[2],Math.sqrt(n[0]*n[0]+n[1]*n[1])),a=e(n,o),i=e(r,o),s=Math.abs(i-a)>Math.PI?a>=i:i>a;return{radius:o,clockwise:s}};return t},o.diagonal.vertical=function(){var t=function(t,e){var n=t[0],r=t[1],o=t[2],a=2e5;return"M"+n+" A"+[a,a]+" 0 0,0 "+r+"M"+r+"L"+o},e=function(t){return[t.y,t.x]};return o.diagonal().path(t).projection(e)},o.diagonal.radial=function(){var t=function(t,e){var n=t[0],r=t[1],o=t[2],a=e.radius,i=e.clockwise;return i?"M"+n+" A"+[a,a]+" 0 0,0 "+r+"M"+r+"L"+o:"M"+r+" A"+[a,a]+" 0 0,0 "+n+"M"+r+"L"+o},e=function(t){var e=t.y,n=(t.x-90)/180*Math.PI;return[e*Math.cos(n),e*Math.sin(n)]};return o.diagonal().path(t).projection(e)},e.exports=n=o.diagonal},{"tnt.api":63}],72:[function(t,e,n){var r=t("./tree.js");r.label=t("./label.js"),r.diagonal=t("./diagonal.js"),r.layout=t("./layout.js"),r.node_display=t("./node_display.js"),e.exports=n=r},{"./diagonal.js":71,"./label.js":73,"./layout.js":74,"./node_display.js":75,"./tree.js":76}],73:[function(t,e,n){var r=t("tnt.api"),o={};o.label=function(){"use strict";{var t=d3.dispatch("click","dblclick","mouseover","mouseout"),e=function(n,r,o){if("function"!=typeof n)throw n;e.display().call(this,n,r).attr("class","tnt_tree_label").attr("transform",function(t){var a=e.transform()(n,r);return"translate ("+(a.translate[0]+o)+" "+a.translate[1]+")rotate("+a.rotate+")"}).on("click",function(){t.click.call(this,n)}).on("dblclick",function(){t.dblclick.call(this,n)}).on("mouseover",function(){t.mouseover.call(this,n)}).on("mouseout",function(){t.mouseout.call(this,n)})};r(e).getset("width",function(){throw"Need a width callback"}).getset("height",function(){throw"Need a height callback"}).getset("display",function(){throw"Need a display callback"}).getset("transform",function(){throw"Need a transform callback"})}return d3.rebind(e,t,"on")},o.label.text=function(){{var t=o.label();r(t).getset("fontsize",10).getset("fontweight","normal").getset("color","#000").getset("text",function(t){return t.data().name})}return t.display(function(e,n){var r=d3.select(this).append("text").attr("text-anchor",function(t){return"radial"===n?t.x%360<180?"start":"end":"start"}).text(function(){return t.text()(e)}).style("font-size",function(){return d3.functor(t.fontsize())(e)+"px"}).style("font-weight",function(){return d3.functor(t.fontweight())(e)}).style("fill",d3.functor(t.color())(e));return r}),t.transform(function(e,n){var r=e.data(),o={translate:[5,5],rotate:0};return"radial"===n&&(o.translate[1]=o.translate[1]-(r.x%360<180?0:t.fontsize()),o.rotate=r.x%360<180?0:180),o}),t.width(function(e){var n=d3.select("body").append("svg").attr("height",0).style("visibility","hidden"),r=n.append("text").style("font-size",d3.functor(t.fontsize())(e)+"px").text(t.text()(e)),o=r.node().getBBox().width;return n.remove(),o}),t.height(function(e){return d3.functor(t.fontsize())(e)}),t},o.label.img=function(){{var t=o.label();r(t).getset("src",function(){})}return t.display(function(e,n){if(t.src()(e)){var r=d3.select(this).append("image").attr("width",t.width()()).attr("height",t.height()()).attr("xlink:href",t.src()(e));return r}return d3.select(this).append("text").text("")}),t.transform(function(e,n){var r=e.data(),o={translate:[10,-t.height()()/2],rotate:0};return"radial"===n&&(o.translate[0]=o.translate[0]+(r.x%360<180?0:t.width()()),o.translate[1]=o.translate[1]+(r.x%360<180?0:t.height()()),o.rotate=r.x%360<180?0:180),o}),t},o.label.composite=function(){var t=[],e=function(e,n,r){for(var o=0,a=0;a<t.length;a++){var i=t[a];!function(t){i.transform(function(e,n){var r=i._super_.transform()(e,n),o={translate:[t+r.translate[0],r.translate[1]],rotate:r.rotate};return o})}(o),o+=10,o+=i.width()(e),i.call(this,e,n,r)}},n=r(e);return n.method("add_label",function(n,o){return n._super_={},r(n._super_).get("transform",n.transform()),t.push(n),e}),n.method("width",function(){return function(e){for(var n=0,r=0;r<t.length;r++)n+=parseInt(t[r].width()(e)),n+=parseInt(t[r]._super_.transform()(e).translate[0]);return n}}),n.method("height",function(){return function(e){for(var n=0,r=0;r<t.length;r++){var o=t[r].height()(e);o>n&&(n=o)}return n}}),e},e.exports=n=o.label},{"tnt.api":63}],74:[function(t,e,n){var r=t("tnt.api"),o=t("./diagonal.js"),a={};a.layout=function(){var t=function(){},e=d3.layout.cluster().sort(null).value(function(t){return t.length}).separation(function(){return 1}),n=r(t).getset("scale",!0).getset("max_leaf_label_width",0).method("cluster",e).method("yscale",function(){throw"yscale is not defined in the base object"}).method("adjust_cluster_size",function(){throw"adjust_cluster_size is not defined in the base object"}).method("width",function(){throw"width is not defined in the base object"}).method("height",function(){throw"height is not defined in the base object"});return n.method("scale_branch_lengths",function(e){if(t.scale()!==!1){var n=e.nodes,r=e.tree,o=n.map(function(t){return t._root_dist}),a=t.yscale(o);r.apply(function(t){t.property("y",a(t.root_dist()))})}}),t},a.layout.vertical=function(){var t=a.layout();t.type="vertical";var e=r(t).getset("width",360).get("translate_vis",[20,20]).method("diagonal",o.vertical).method("transform_node",function(t){return"translate("+t.y+","+t.x+")"});return e.method("height",function(t){return t.n_leaves*t.label_height}),e.method("yscale",function(e){return d3.scale.linear().domain([0,d3.max(e)]).range([0,t.width()-20-t.max_leaf_label_width()])}),e.method("adjust_cluster_size",function(e){var n=t.height(e),r=t.width()-t.max_leaf_label_width()-t.translate_vis()[0]-e.label_padding;return t.cluster.size([n,r]),t}),t},a.layout.radial=function(){var t=a.layout();t.type="radial";var e=360,n=e/2,i={width:360},s=r(t).getset(i).getset("translate_vis",[n,n]).method("transform_node",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"}).method("diagonal",o.radial).method("height",function(){return i.width});return t.width.transform(function(e){return n=e/2,t.cluster.size([360,n]),t.translate_vis([n,n]),e}),s.method("yscale",function(t){return d3.scale.linear().domain([0,d3.max(t)]).range([0,n])}),s.method("adjust_cluster_size",function(e){return n=t.width()/2-t.max_leaf_label_width()-20,t.cluster.size([360,n]),t}),t},e.exports=n=a.layout},{"./diagonal.js":71,"tnt.api":63}],75:[function(t,e,n){var r=t("tnt.api"),o={};o.node_display=function(){"use strict";{var t=function(e){t.display().call(this,e)};r(t).getset("size",4.5).getset("fill","black").getset("stroke","black").getset("stroke_width","1px").getset("display",function(){throw"display is not defined in the base object"})}return t},o.node_display.circle=function(){var t=o.node_display();return t.display(function(e){d3.select(this).append("circle").attr("r",function(n){return d3.functor(t.size())(e)}).attr("fill",function(n){return d3.functor(t.fill())(e)}).attr("stroke",function(n){return d3.functor(t.stroke())(e)}).attr("stroke-width",function(n){return d3.functor(t.stroke_width())(e)})}),t},o.node_display.square=function(){var t=o.node_display();return t.display(function(e){var n=d3.functor(t.size())(e);d3.select(this).append("rect").attr("x",function(t){return-n}).attr("y",function(t){return-n}).attr("width",function(t){return 2*n}).attr("height",function(t){return 2*n}).attr("fill",function(n){return d3.functor(t.fill())(e)}).attr("stroke",function(n){return d3.functor(t.stroke())(e)}).attr("stroke-width",function(n){return d3.functor(t.stroke_width())(e)})}),t},o.node_display.triangle=function(){var t=o.node_display();return t.display(function(e){var n=d3.functor(t.size())(e);d3.select(this).append("polygon").attr("points",-n+",0 "+n+","+-n+" "+n+","+n).attr("fill",function(n){return d3.functor(t.fill())(e)}).attr("stroke",function(n){return d3.functor(t.stroke())(e)}).attr("stroke-width",function(n){return d3.functor(t.stroke_width())(e)})}),t},e.exports=n=o.node_display},{"tnt.api":63}],76:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.tree.node"),a=function(){"use strict";var t,e,n,i,s,u,c=d3.dispatch("click","dblclick","mouseover","mouseout"),l={duration:500,node_display:a.node_display.circle(),label:a.label.text(),layout:a.layout.vertical(),branch_color:"black",id:function(t){return t._id}},d="cubic-in-out",f={tree:void 0,data:void 0,nodes:void 0,links:void 0},h={tree:void 0,data:void 0,nodes:void 0,links:void 0},p=function(t){e=d3.select(t).attr("id");var r=d3.select(t).append("div").style("width",l.layout.width()+"px").attr("class","tnt_groupDiv"),f=l.layout.cluster,p=h.tree.get_all_leaves().length,g=function(t){for(var e=0,n=t.get_all_leaves(),r=0;r<n.length;r++){var o=l.label.width()(n[r])+d3.functor(l.node_display.size())(n[r]);o>e&&(e=o)}return e},_=function(t){for(var e=0,n=t.get_all_leaves(),r=0;r<n.length;r++){var o=2*d3.functor(l.node_display.size())(n[r]),a=d3.functor(l.label.height())(n[r]);e=d3.max([e,o,a])}return e},m=g(h.tree);l.layout.max_leaf_label_width(m);var y=_(h.tree),x={n_leaves:p,label_height:y,label_padding:15};l.layout.adjust_cluster_size(x);var b=l.layout.diagonal(),k=l.layout.transform_node;n=r.append("svg").attr("width",l.layout.width()).attr("height",l.layout.height(x)+30).attr("fill","none"),i=n.append("g").attr("id","tnt_st_"+e).attr("transform","translate("+l.layout.translate_vis()[0]+","+l.layout.translate_vis()[1]+")"),h.nodes=f.nodes(h.data),l.layout.scale_branch_lengths(h),h.links=f.links(h.nodes),s=i.append("g").attr("class","links"),u=i.append("g").attr("class","nodes");var w=s.selectAll("path.tnt_tree_link").data(h.links,function(t){return l.id(t.target)});w.enter().append("path").attr("class","tnt_tree_link").attr("id",function(t){return"tnt_tree_link_"+e+"_"+l.id(t.target)}).style("stroke",function(t){return d3.functor(l.branch_color)(o(t.source),o(t.target))}).attr("d",b);var j=u.selectAll("g.tnt_tree_node").data(h.nodes,function(t){return l.id(t)}),z=j.enter().append("g").attr("class",function(t){return t.children?0==t.depth?"root tnt_tree_node":"inner tnt_tree_node":"leaf tnt_tree_node"}).attr("id",function(t){return"tnt_tree_node_"+e+"_"+t._id}).attr("transform",k);z.each(function(t){l.node_display.call(this,o(t))}),z.each(function(t){l.label.call(this,o(t),l.layout.type,d3.functor(l.node_display.size())(o(t)))}),z.on("click",function(t){var e=o(t);a.trigger("node:click",e),c.click.call(this,e)}),z.on("dblclick",function(t){var e=o(t);a.trigger("node:dblclick",e),c.dblclick.call(this,e)}),z.on("mouseover",function(t){var e=o(t);a.trigger("node:hover",o(t)),c.mouseover.call(this,e)}),z.on("mouseout",function(t){var e=o(t);a.trigger("node:mouseout",o(t)),c.mouseout.call(this,e)}),v.method("update",function(){r.style("width",l.layout.width()+"px"),n.attr("width",l.layout.width());var t=l.layout.cluster,f=l.layout.diagonal(),p=l.layout.transform_node,v=g(h.tree);l.layout.max_leaf_label_width(v);var m=_(h.tree),y=h.tree.get_all_leaves().length,x={n_leaves:y,label_height:m,label_padding:15};l.layout.adjust_cluster_size(x),n.transition().duration(l.duration).ease(d).attr("height",l.layout.height(x)+30),i.transition().duration(l.duration).attr("transform","translate("+l.layout.translate_vis()[0]+","+l.layout.translate_vis()[1]+")"),h.nodes=t.nodes(h.data),l.layout.scale_branch_lengths(h),h.links=t.links(h.nodes);{var b=s.selectAll("path.tnt_tree_link").data(h.links,function(t){return l.id(t.target)}),k=u.selectAll("g.tnt_tree_node").data(h.nodes,function(t){return l.id(t)});b.exit().remove()}b.enter().append("path").attr("class","tnt_tree_link").attr("id",function(t){return"tnt_tree_link_"+e+"_"+l.id(t.target)}).attr("stroke",function(t){return d3.functor(l.branch_color)(o(t.source),o(t.target))}).attr("d",f),b.transition().ease(d).duration(l.duration).attr("d",f);var w=k.enter().append("g").attr("class",function(t){return t.children?0==t.depth?"root tnt_tree_node":"inner tnt_tree_node":"leaf tnt_tree_node"}).attr("id",function(t){return"tnt_tree_node_"+e+"_"+t._id}).attr("transform",p);k.exit().remove(),w.on("click",function(t){var e=o(t);a.trigger("node:click",e),c.click.call(this,e)}),w.on("dblclick",function(t){var e=o(t);a.trigger("node:dblclick",e),c.dblclick.call(this,e)}),w.on("mouseover",function(t){var e=o(t);a.trigger("node:hover",o(t)),c.mouseover.call(this,e)}),w.on("mouseout",function(t){var e=o(t);a.trigger("node:mouseout",o(t)),c.mouseout.call(this,e)}),k.selectAll("*").remove(),k.each(function(t){l.node_display.call(this,o(t))}),k.each(function(t){l.label.call(this,o(t),l.layout.type,d3.functor(l.node_display.size())(o(t)))}),k.transition().ease(d).duration(l.duration).attr("transform",p)})},v=r(p).getset(l);return v.method("data",function(t){if(!arguments.length)return f.data;f.data=t,h.data=t;var e=o(f.data);return p.root(e),a.trigger("data:hasChanged",f.data),this}),v.method("root",function(t){return arguments.length?(f.tree=t,h.tree=f.tree,this):h.tree}),v.method("subtree",function(t,e){var n=f.tree.subtree(t,e);return h.data=n.data(),h.tree=n,this}),v.method("focus_node",function(e,n){var r=p.root().find_node(function(t){return e.id()===t.id()});return t=r,p.subtree(r.get_all_leaves(),n),this}),v.method("has_focus",function(e){return void 0!==t&&t.id()===e.id()}),v.method("release_focus",function(){return p.data(f.data),t=void 0,this}),d3.rebind(p,c,"on")};e.exports=n=a},{"tnt.api":63,"tnt.tree.node":65}],77:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{"./src/index.js":78}],78:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./reduce.js":79,"./utils.js":80}],79:[function(t,e,n){e.exports=t(14)},{}],80:[function(t,e,n){e.exports={iterator:function(t){var e=t||0,n=function(){return e++};return n},script_path:function(t){var e=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),n=new RegExp(e+"$"),r=new RegExp("(.*)"+e+"$"),o=document.getElementsByTagName("script"),a="";if(void 0!==o)for(var i in o)if(o[i].src&&o[i].src.match(n))return o[i].src.replace(r,"$1");return a},defer_cancel:function(t,e){var n,r=function(){var r=Array.prototype.slice.call(arguments),o=this;clearTimeout(n),n=setTimeout(function(){t.apply(o,r)},e)};return r}}},{}],81:[function(t,e,n){var r=(t("tnt.api"),function(){"use strict";var t,e=!0,n={tree:void 0,track:function(){var t=tnt.track().background_color("#EBF5FF").data(tnt.track.data().update(tnt.track.retriever.sync().retriever(function(){return[]}))).display(tnt.track.feature.block().foreground_color("steelblue").index(function(t){return t.start}));return t},annotation:void 0,ruler:"none",key:void 0},o=function(e){t=d3.select(e).attr("id");var r=d3.select(e).append("div").attr("class","tnt_groupDiv"),i=r.append("div").attr("id","tnt_tree_container_"+t).attr("class","tnt_tree_container"),s=r.append("div").attr("id","tnt_annot_container_"+t).attr("class","tnt_annot_container");n.tree(i.node());for(var u=n.tree.root().get_all_leaves(),c=[],l=n.tree.label().height(),d=0;d<u.length;d++)!function(t){tnt.track.id=function(){return void 0===n.key?t.id():"function"==typeof n.key?n.key(t):t.property(n.key)};var e=n.track(u[d]).height(l);c.push(e)}(u[d]);tnt.track.id=function(){return"axis-top"};var f=tnt.track().height(0).background_color("white").display(tnt.track.feature.axis().orientation("top"));tnt.track.id=function(){return"axis-bottom"};var h=tnt.track().height(18).background_color("white").display(tnt.track.feature.axis().orientation("bottom"));return n.annotation&&(("both"===n.ruler||"top"===n.ruler)&&n.annotation.add_track(f),n.annotation.add_track(c),("both"===n.ruler||"bottom"===n.ruler)&&n.annotation.add_track(h),n.annotation(s.node()),n.annotation.start()),a.method("update",function(){if(n.tree.update(),n.annotation){var t=n.tree.root().get_all_leaves(),e=[];("both"===n.ruler||"top"===n.ruler)&&e.push(f);for(var r=0;r<t.length;r++){var o;o=void 0===n.key?t[r].id():"function"==typeof n.key?n.key(t[r]):t[r].property(n.key);var a=n.annotation.find_track_by_id(o);void 0===a&&!function(e){tnt.track.id=function(){return void 0===n.key?e.id():"function"==typeof n.key?n.key(e):e.property(n.key)},a=n.track(t[r]).height(l)}(t[r]),e.push(a)}("both"===n.ruler||"bottom"===n.ruler)&&e.push(h),n.annotation.reorder(e)}}),o},a=tnt.utils.api(o).getset(n);return o.track=function(t){if(!arguments.length)return n.track;if(e)return n.track=t,e=!1,o;var r=n.annotation.tracks(),a=0,i=0;if("both"===n.ruler?(a=1,i=2):"top"===n.ruler?(a=1,i=1):"bottom"===n.ruler&&(i=1),a>0&&r[0].display().reset.call(r[0]),i>a){var s=r.length-1;r[s].display().reset.call(r[s])}for(var u=a;u<=r.length-i;u++){var c=r[u];c.display().reset.call(c);var l;n.tree.root().apply(function(t){t.id()===c.id()&&(l=t)});var d;!function(e){tnt.track.id=function(){return void 0===n.key?e.id():n.key(e)},d=t(e).height(n.tree.label().height())}(l),r[u]=d}n.track=t,n.annotation.start()},r});e.exports=n=r},{"tnt.api":7}]},{},[1]);